!function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i?i:t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(p===setTimeout)return setTimeout(t,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function s(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){v&&f&&(v=!1,f.length?_=f.concat(_):y=-1,_.length&&u())}function u(){if(!v){var t=o(a);v=!0;for(var e=_.length;e;){for(f=_,_=[];++y<e;)f&&f[y].run();y=-1,e=_.length}f=null,v=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var p,c,d=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(t){p=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var f,_=[],v=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];_.push(new h(t,e)),1!==_.length||v||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],2:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],3:[function(t,e,i){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,e,i){(function(e,n){function r(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(e)?n.showHidden=e:e&&i._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var i=r.styles[e];return i?"["+r.colors[i][0]+"m"+t+"["+r.colors[i][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&R(e.inspect)&&e.inspect!==i.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return g(r)||(r=u(t,r,n)),r}var o=h(t,e);if(o)return o;var s=Object.keys(e),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),P(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(R(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(P(e))return l(e)}var y="",m=!1,b=["{","}"];if(f(e)&&(m=!0,b=["[","]"]),R(e)){var w=e.name?": "+e.name:"";y=" [Function"+w+"]"}if(x(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),P(e)&&(y=" "+l(e)),0===s.length&&(!m||0==e.length))return b[0]+y+b[1];if(n<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var T;return T=m?p(t,e,n,_,s):s.map(function(i){return c(t,e,n,_,i,m)}),t.seen.pop(),d(T,y,b)}function h(t,e){if(w(e))return t.stylize("undefined","undefined");if(g(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return m(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)L(e,String(s))?o.push(c(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(c(t,e,i,n,r,!0))}),o}function c(t,e,i,n,r,o){var s,a,h;if(h=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},h.get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),L(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(h.value)<0?(a=v(i)?u(t,h.value,null):u(t,h.value,i-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,i){var n=0,r=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function f(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return T(t)&&"[object RegExp]"===M(t)}function T(t){return"object"==typeof t&&null!==t}function S(t){return T(t)&&"[object Date]"===M(t)}function P(t){return T(t)&&("[object Error]"===M(t)||t instanceof Error)}function R(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function M(t){return Object.prototype.toString.call(t)}function j(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,e=[j(t.getHours()),j(t.getMinutes()),j(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var E=/%[sdj%]/g;i.format=function(t){if(!g(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(r(arguments[i]));return e.join(" ")}for(var i=1,n=arguments,o=n.length,s=String(t).replace(E,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),a=n[i];i<o;a=n[++i])s+=v(a)||!T(a)?" "+a:" "+r(a);return s},i.deprecate=function(t,r){function o(){if(!s){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(w(n.process))return function(){return i.deprecate(t,r).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var B,C={};i.debuglog=function(t){if(w(B)&&(B=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var n=e.pid;C[t]=function(){var e=i.format.apply(i,arguments);console.error("%s %d: %s",t,n,e)}}else C[t]=function(){};return C[t]},i.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=f,i.isBoolean=_,i.isNull=v,i.isNullOrUndefined=y,i.isNumber=m,i.isString=g,i.isSymbol=b,i.isUndefined=w,i.isRegExp=x,i.isObject=T,i.isDate=S,i.isError=P,i.isFunction=R,i.isPrimitive=A,i.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",I(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._extend=function(t,e){if(!e||!T(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:1,inherits:2}],5:[function(t,e,i){function n(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i}function r(t,e){this.canvas=n(t,e),this.ctx=this.canvas.getContext("2d"),this._cursor={i:0,j:0},this._paper=0,this._pen=1,this._textColumn=~~(t/4),this._textLine=~~(e/6),this._textOffset=1,this._textPadding=e-6*this._textLine-this._textOffset,this.camera={x:0,y:0},this.ctx.fillStyle=this.palette[0],this.ctx.strokeStyle=this.palette[1]}function o(t,e){for(var i=[219,438,511,14016,14043,14326,14335,28032,28123,28086,28159,32704,32731,32758,32767,128,146,384,402,9344,9362,9600,9618,192,210,448,466,9408,9426,9664,9682,32767,0,8338,45,11962,5588,21157,29354,10,17556,5265,21973,1488,5312,448,13824,5268,31599,29843,29671,31143,18925,31183,31689,18735,31727,18927,1040,5136,17492,3640,5393,8359,25450,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25750,17553,13459,9402,28672,34,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25686,9362,13587,42,21845],n=0;n<e.length;n++){t.fillStyle=e[n];for(var r=0;r<i.length;r++)for(var o=i[r],s=0;s<15;s++){var a=s%3,u=~~(s/3),h=o>>s&1;1===h&&t.fillRect(3*r+a,5*n+u,1,1)}}t.fillStyle=e[0]}var s=settings.tileSize[0],a=settings.tileSize[1],u=16,h=Math.PI/2;e.exports=r,r.prototype._isTexture=!0,r.prototype.palette=["#000000","#FFFFFF"],r.prototype.tilesheet=new r(s*u,a*u),r.prototype.textCharset=new r(384,5*r.prototype.palette.length),r.prototype.resize=function(t,e){return this.canvas.width=t,this.canvas.height=e,this._textColumn=~~(t/4),this._textLine=~~(e/6),this._textOffset=1,this._cursor.i=0,this._cursor.j=0,this.clear(),this},r.prototype.setPalette=function(t){r.prototype.palette=t,r.prototype.textCharset=new r(384,5*t.length),o(r.prototype.textCharset.ctx,t)},r.prototype.setGlobalTilesheet=function(t){r.prototype.tilesheet.clear().draw(t,0,0)},r.prototype.setTilesheet=function(t){return t?(this.tilesheet===r.prototype.tilesheet&&(this.tilesheet=new r(s*u,a*u)),this.tilesheet.clear().draw(t,0,0),this):void delete this.tilesheet},r.prototype.setCamera=function(t,e){return this.camera.x=t||0,this.camera.y=e||0,this},r.prototype.sprite=function(t,e,i,n,r,o){var l=t%u,p=~~(t/u),c=this.ctx;return e=e||0,i=i||0,e=~~Math.round(e-this.camera.x),i=~~Math.round(i-this.camera.y),n||r||o?(c.save(),n&&(c.scale(-1,1),e*=-1,e-=s),r&&(c.scale(1,-1),i*=-1,i-=a),o?(c.translate(e+a,i),c.rotate(h)):c.translate(e,i),c.drawImage(this.tilesheet.canvas,l*s,p*a,s,a,0,0,s,a),c.restore(),this):(c.drawImage(this.tilesheet.canvas,l*s,p*a,s,a,e,i,s,a),this)},r.prototype.draw=function(t,e,i,n,r,o){t._isTileMap&&(t=t.texture.canvas),t._isTexture&&(t=t.canvas);var s=~~Math.round((e||0)-this.camera.x),a=~~Math.round((i||0)-this.camera.y);if(!n&&!r&&!o)return this.ctx.drawImage(t,s,a),this;var u=this.ctx;return u.save(),n&&(u.scale(-1,1),s*=-1,s-=t.width),r&&(u.scale(1,-1),a*=-1,a-=t.height),o?(u.translate(s+t.height,a),u.rotate(h)):u.translate(s,a),u.drawImage(t,0,0),u.restore(),this},r.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this},r.prototype.cls=function(){return this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.locate(0,0),this},r.prototype.pen=function(t){return this._pen=t%this.palette.length,this.ctx.strokeStyle=this.palette[this._pen],this},r.prototype.paper=function(t){return this._paper=t%this.palette.length,this.ctx.fillStyle=this.palette[this._paper],this},r.prototype.rect=function(t,e,i,n){return this.ctx.strokeRect(~~(t-this.camera.x)+.5,~~(e-this.camera.y)+.5,~~(i-1),~~(n-1)),this},r.prototype.rectfill=function(t,e,i,n){return this.ctx.fillRect(~~(t-this.camera.x),~~(e-this.camera.y),~~i,~~n),this},r.prototype.locate=function(t,e){return this._cursor.i=~~t,this._cursor.j=~~e,this},r.prototype.print=function(t,e,i){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){t="[Object]"}else"string"!=typeof t&&(t=t.toString());if(void 0!==e){e=~~Math.round(e-this.camera.x),i=~~Math.round(i-this.camera.y);for(var n=0;n<t.length;n++)this.ctx.drawImage(this.textCharset.canvas,3*t.charCodeAt(n),5*this._pen,3,5,e,i,3,5),e+=4;return this}for(var n=0;n<t.length;n++){this._cursor.j>=this._textLine&&this.textScroll();var r=t.charCodeAt(n);10!==r&&13!==r?(this.ctx.drawImage(this.textCharset.canvas,3*r,5*this._pen,3,5,4*this._cursor.i,6*this._cursor.j+this._textOffset,3,5),this._cursor.i+=1,this._cursor.i>this._textColumn&&(this._cursor.i=0,this._cursor.j+=1)):(this._cursor.i=0,this._cursor.j+=1)}return this},r.prototype.println=function(t){return this.print(t),this.print("\n"),this},r.prototype.textScroll=function(t){return void 0===t&&(t=1),this._cursor.j-=t,t*=6,this.ctx.drawImage(this.canvas,0,-t),this.ctx.fillRect(0,this.canvas.height-t-this._textPadding,this.canvas.width,t+this._textPadding),this}},{}],6:[function(t,e,i){function n(t,e,i,n,r,o,s,a){this.x=~~t,this.y=~~e,this.sprite=~~i,this.flipH=!!n,this.flipV=!!r,this.flipR=!!o,this.flagA=!!s,this.flagB=!!a}function r(t,e){this._name="",this.width=0,this.height=0,this.items=[],this.texture=new o(t*s,e*a),this._tilesheetPath="",t&&e&&this._init(t,e)}var o=t("../Texture"),s=settings.tileSize[0],a=settings.tileSize[1];n.prototype.draw=function(t){t.sprite(this.sprite,this.x*s,this.y*a,this.flipH,this.flipV,this.flipR)},e.exports=r,r.prototype._isTileMap=!0;var u={},h=[];r.getMap=function(t){return"string"==typeof t?u[t]:"number"==typeof t?h[t]:(console.error("Map does not exist",t),null)},r._checkBankFormat=function(t){return t?Array.isArray(t)?{_type:"maps",maps:t}:"maps"!==t._type?(console.warn("Map bank format incorrect"),{_type:"maps",maps:[]}):t:(console.warn("No map bank"),{_type:"maps",maps:[]})},r.loadBank=function(t){t=r._checkBankFormat(t);for(var e=[],i=t.maps||[],n=0;n<i.length;n++)e.push((new r).load(i[n]))},Object.defineProperty(r.prototype,"name",{get:function(){return this._name},set:function(t){this._name&&u[this._name]&&u[this._name]===this&&delete u[this._name],this._name=t,t&&!u[t]&&(u[t]=this)}}),r.prototype._init=function(t,e){this.texture.resize(t*s,e*a),this.width=t,this.height=e,this.items=[];for(var i=0;i<t;i++){this.items.push([]);for(var n=0;n<e;n++)this.items[i][n]=null}},r.prototype.resize=function(t,e){var i=this.items,n=Math.min(this.width,t),r=Math.min(this.height,e);this.texture.resize(t*s,e*a),this._init(t,e);for(var o=0;o<n;o++)for(var u=0;u<r;u++)this.items[o][u]=i[o][u];return this.redraw(),this},r.prototype.set=function(t,e,i,r,o,u,h,l){if(null===i||void 0===i)return this.remove(t,e);if(!(t<0||e<0||t>=this.width||e>=this.height)){var p=this.items[t][e]=new n(t,e,i,r,o,u,h,l);return this.texture.ctx.clearRect(t*s,e*a,s,a),p.draw(this.texture),this}},r.prototype.remove=function(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.items[t][e]=null,this.texture.ctx.clearRect(t*s,e*a,s,a),this},r.prototype.get=function(t,e){return t<0||e<0||t>=this.width||e>=this.height?null:this.items[t][e]},r.prototype.redraw=function(){this.texture.clear();for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++)this.items[t][e]&&this.items[t][e].draw(this.texture);return this},r.prototype.draw=function(t,e){draw(this.texture,t,e)},r.prototype.setTilesheet=function(t){return this._tilesheetPath=t&&t.path||"",this.texture.setTilesheet(t),this.redraw(),this},r.prototype._setTilesheetPath=function(t){if(this._tilesheetPath=t||"",!t)return this.setTilesheet();t=t.split("/"),fileId=t.pop();for(var e=assets,i=0;i<t.length;i++)if(e=e[t[i]],!e)return console.warn("Could not find tilesheet",t);var n=e[fileId];n&&n instanceof Image&&this.setTilesheet(n)};var l,p;!function(){function t(t){var i=~~(t/r),n=t%r;return e[i]+e[n]}for(var e="#$%&'()*+,-~/0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}. !",i={},n=0;n<e.length;n++)i[e[n]]=n;var r=e.length,o=r*r-1,s=Math.pow(2,13),a=o-s-1;l=function(e){str="",count=0;for(var i=0;i<e.length;i++){var n=e[i];n===e[i+1]&&++count<a||(null===n&&(n=o),str+=t(n),count===a&&count--,0!==count&&(str+=t(s+count)),count=0)}return count===a&&count--,0!==count&&(str+=t(s+count)),str},p=function(t){arr=[];for(var e=0;e<t.length;){var n=t[e++],a=t[e++],u=i[n]*r+i[a];if(u===o)arr.push(null);else if(u>s)for(var h=u-s,l=arr[arr.length-1],p=0;p<h;p++)arr.push(l);else arr.push(u)}return arr}}(),r.prototype.save=function(){for(var t=this.width,e=this.height,i=new Array(t*e),n=0;n<t;n++)for(var r=0;r<e;r++){var o=this.items[n][r];i[n+r*t]=o?o.sprite+(o.flipH<<8)+(o.flipV<<9)+(o.flipR<<10)+(o.flagA<<11)+(o.flagB<<12):null}var s={w:t,h:e,name:this.name,sheet:this._tilesheetPath||"",data:l(i)};return s},r.prototype.load=function(t){var e=t.w,i=t.h;this._init(e,i),this.name=t.name||"",this._setTilesheetPath(t.sheet);for(var n=p(t.data),r=0;r<e;r++)for(var o=0;o<i;o++){var s=n[r+o*e];if(null!==s){var a=255&s,u=s>>8&1,h=s>>9&1,l=s>>10&1,c=s>>11&1,d=s>>12&1;this.set(r,o,a,u,h,l,c,d)}}return this.redraw(),this},r.prototype.copy=function(t,e,i,n){t=t||0,e=e||0,void 0!==i&&null!==i||(i=this.width),void 0!==n&&null!==n||(n=this.height);var o=new r(i,n);return o.paste(this,-t,-e),o},r.prototype.paste=function(t,e,i,n){e=e||0,i=i||0;for(var r=Math.min(t.width,this.width-e),o=Math.min(t.height,this.height-i),s=Math.max(0,-e),a=Math.max(0,-i),u=s;u<r;u++)for(var h=a;h<o;h++){var l=t.items[u][h];if(l)this.set(u+e,h+i,l.sprite,l.flipH,l.flipV,l.flipR,l.flagA,l.flagB);else{if(n)continue;this.remove(u+e,h+i)}}return this.redraw(),this},r.prototype.clear=function(){for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++)this.items[t][e]=null;return this.texture.clear(),this},r.prototype.find=function(t,e,i){if(null===t)return this._findNull();void 0===e&&(e=null),void 0===i&&(i=null);for(var n=[],r=0;r<this.width;r++)for(var o=0;o<this.height;o++){var s=this.items[r][o];if(s){var a=null===e||s.flagA===e,u=null===i||s.flagB===i;s.sprite===t&&a&&u&&n.push(s)}}return n},r.prototype._findNull=function(){for(var t=[],e=0;e<this.width;e++)for(var i=0;i<this.height;i++)null===this.items[e][i]&&t.push({x:e,y:i});return t}},{"../Texture":5}],7:[function(t,e,i){function n(t,e,i){var n=new XMLHttpRequest;n.responseType=e||"arraybuffer",n.onreadystatechange=function(){if(4===~~n.readyState)return 200!==~~n.status&&0!==~~n.status?i&&i("xhrError:"+n.status):i&&i(null,n.response)},n.open("GET",t,!0),n.send()}function r(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===~~i.readyState)return 200!==~~i.status?e("xhrError:"+i.status):e&&e(null,JSON.parse(i.response))},i.open("GET",t,!0),i.send()}function o(t,e){var i=new XMLHttpRequest;i.open("POST","req",!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.onreadystatechange=function(){if(4===~~i.readyState){if(200!==~~i.status)return e&&e("xhr:"+i.status);var t=JSON.parse(i.response);return e&&e(t.error,t.result)}},i.send(JSON.stringify(t))}function s(t,e){var i=new Image;i.onload=function(){this.onload=null,this.onerror=null,e&&e(null,this)},i.onerror=function(){this.onload=null,this.onerror=null,e&&e("img:"+t)},i.src=t}function a(t,e){function i(){e&&e(null,r),r.removeEventListener("canplaythrough",i),r.removeEventListener("error",n)}function n(){e&&e("snd:load"),r.removeEventListener("canplaythrough",i),r.removeEventListener("error",n)}var r=new Audio;r.preload=!0,r.loop=!1,r.addEventListener("canplaythrough",i),r.addEventListener("error",n),r.src=t,r.load()}function u(t,e){r("build/data.json",function(i,n){function r(t,e){var i=t.split("/"),n=i.pop(),r=n.split(".");r.pop(),r=r.join(".");for(var o=u,s=0,a=i.length;s<a;s++)o=o[i[s]];o[r]=e,i.push(r),e.name=r,e.path=i.join("/")}function o(){var i=c+d,f=i/l;e&&e(c,i,l,f);var _,v;i<h?(_=n.img[i],v=s):(_=n.snd[i-h],v=a),d+=1,v(p+_,function(e,i){e||r(_,i),c+=1,d-=1,c+d<l?o():0===d&&t(null,u)})}if(i)return t(i);var u=n.dat,h=n.img.length,l=h+n.snd.length,p=n.root,c=0,d=0;if(0===l)return t(null,u);for(var f=Math.min(5,l-1),_=0;_<=f;_++)o()})}i.loadData=n,i.loadJson=r,i.sendRequest=o,i.loadImage=s,i.loadSound=a,i.preloadStaticAssets=u},{}],8:[function(t,e,i){function n(t){this.id=t,this.volume=1,this.muted=!0,this.loopSound=null,this.loopId=null,this.loopVol=0,this.nextLoop=null}e.exports=n,n.prototype.setVolume=function(t,e){var i=this.muted;this.muted=0===t||e||!1,void 0!==t&&null!==t?this.volume=t:t=this.volume,this.loopId&&(this.loopSound&&this.muted?this.loopSound.stop():this.loopSound&&this.loopSound.id===this.loopId?(this.loopSound.setVolume(Math.max(0,Math.min(1,t*this.loopVol))),i&&this.loopSound.play()):this.muted||this.audioManager.playLoopSound(this.id,this.loopId,this.loopVol))},n.prototype.setMute=function(t){this.setVolume(null,t)},n.prototype.playLoopSound=function(t,e,i,n,r,o){function s(t,e){return t?void(t.stopping||t.stop(function(){return h.freeSound(t),t=null,e&&e()})):e&&e()}function a(){var t=f.loopSound=f.nextLoop;f.nextLoop=null,t&&(t.setLoop(!0,r,o),t.fade=l,t.load(function(r){return r?(t.unload(),void(f.loopSound=null)):void t.play(e*f.volume,i,n)}))}function u(){f.loopSound=null,window.setTimeout(a,0)}var h=this.audioManager,l=h.settings.defaultFade,p=h.settings.crossFading,c=this.loopSound,d=c&&c.id;if(e=Math.max(0,Math.min(1,e||1)),this.loopId=t,this.loopVol=e,!h.muted&&!this.muted){if(t===d&&c)return c.play(e*this.volume,i,n),void(this.nextLoop&&(this.nextLoop.cancelOnLoadCallbacks(),this.nextLoop=null));if(c=null,!this.nextLoop||this.nextLoop.id!==t){var f=this;p?(this.nextLoop&&this.nextLoop.cancelOnLoadCallbacks(),this.nextLoop=h.createSound(t,this.id),this.nextLoop.load(function(t){return t?(f.nextLoop.unload(),void(f.nextLoop=null)):(s(f.loopSound),void u())})):(this.nextLoop=h.createSound(t,this.id),s(this.loopSound,u))}}}},{}],9:[function(t,e,i){function n(t){this.soundsById={},this.soundGroupsById={},this.permanentSounds={},this.freeSoundPool=[],this.soundArchive=new o(function(){return 1}),this.soundGroupArchive=new o(function(){return 1}),this.soundArchiveById={},this.soundGroupArchiveById={},this.usedMemory=0,this.channels={},this.audioContext=null,this.muted=!1,this.settings={audioPath:"",maxSoundGroup:500,maxUsedMemory:300,defaultFade:2,maxPlayLatency:1e3,crossFading:!1,getFileUri:function(t,e){return t+e+".mp3"},getSoundConstructor:function(t,e){return null}};for(var e=0;e<t.length;e++){var i=t[e];this.channels[i]=new u(i)}h.prototype.audioManager=this,a.prototype.audioManager=this,u.prototype.audioManager=this}var r=window.AudioContext||window.webkitAudioContext,o=t("./OrderedList"),s=t("./SoundBuffered.js"),a=t("./SoundGroup.js"),u=t("./AudioChannel.js"),h=t("./ISound.js");r||(console.warn("Web Audio API is not supported on this platform. Fallback to regular HTML5 <Audio>"),s=t("./Sound.js"),window.Audio||(console.warn("HTML5 <Audio> is not supported on this platform. Sound features are unavailable."),s=h)),e.exports=n,e.exports.ISound=h,n.prototype.init=function(){if(!this.audioContext&&r){this.audioContext=new r,s.prototype.audioContext=this.audioContext;for(var t in this.soundsById)this.soundsById[t].init()}},n.prototype.getEmptySound=function(t,e){var i,n=this.settings.getSoundConstructor(t,e);return n?i=new n:(this.freeSoundPool.length>0?(i=this.freeSoundPool.pop(),i.init()):i=new s,i)},n.prototype.setup=function(t){for(var e in t){var i=t[e];this.setVolume(e,i.volume,i.muted)}},n.prototype.addChannel=function(t){this.channels[t]||(this.channels[t]=new u(t))},n.prototype.setVolume=function(t,e,i){var n=this.channels[t];n&&n.setVolume(e,i)},n.prototype.setMute=function(t){void 0===t&&(t=!this.muted),this.muted=!!t;for(var e in this.channels){var i=this.channels[e];if(i.loopSound)if(t)i.loopSound.stop();else{var n=i.muted;i.muted=!0,i.setVolume(null,n)}}},n.prototype.loadSound=function(t,e){var i=this.createSound(t);return i.load(e),i},n.prototype.createSound=function(t,e){var i=this.getSound(t);return i?i:(i=this.soundsById[t]=this.getEmptySound(e,t),i.setId(t),i)},n.prototype.createSoundPermanent=function(t,e){var i=this.getSound(t);if(i)return i;var n=this.settings.getSoundConstructor(e,t)||s;return i=this.permanentSounds[t]=new n,i.setId(t),i},n.prototype.getSound=function(t){var e=this.permanentSounds[t];return e?e:(e=this.soundsById[t])?e:(e=this.soundArchiveById[t])?(this.soundArchive.removeByRef(e.poolRef),e.poolRef=null,delete this.soundArchiveById[t],this.soundsById[t]=e,e):null},n.prototype.getSoundGroup=function(t){var e=this.soundGroupsById[t];return e?e:(e=this.soundGroupArchiveById[t])?(this.soundGroupArchive.removeByRef(e.poolRef),e.poolRef=null,delete this.soundGroupArchiveById[t],e.verifySounds(),this.soundGroupsById[t]=e,e):null},n.prototype.freeSound=function(t){var e=t.id;this.soundsById[e]&&delete this.soundsById[e],this.soundArchiveById[e]&&(this.soundArchive.removeByRef(t.poolRef),t.poolRef=null,delete this.soundArchiveById[e]),t.unload(),t instanceof s&&this.freeSoundPool.push(t)},n.prototype.playLoopSound=function(t,e,i,n,r,o,s){var a=this.channels[t];return a?void a.playLoopSound(e,i,n,r,o,s):console.warn('Channel id "'+t+'" does not exist.')},n.prototype.stopLoopSound=function(t){var e=this,i=this.channels[t];if(!i)return console.warn('Channel id "'+t+'" does not exist.');var n=i.loopSound;i.loopId=null,n&&n.stop(function(){e.freeSound(n),i.loopSound=null})},n.prototype.stopAllLoopSounds=function(){for(var t in this.channels)this.stopLoopSound(t)},n.prototype.release=function(){var t,e,i,n=this.settings.maxSoundGroup,r=this.settings.maxUsedMemory,o={};for(t in this.channels){var s=this.channels[t];s.loopSound&&(o[s.loopSound.id]=!0)}for(t in this.soundGroupsById)e=this.soundGroupsById[t],e.poolRef=this.soundGroupArchive.add(e),this.soundGroupArchiveById[t]=e,delete this.soundGroupsById[t];for(t in this.soundsById)o[t]||(i=this.soundsById[t],i.poolRef=this.soundArchive.add(i),this.soundArchiveById[t]=i,delete this.soundsById[t]);for(var a=this.soundGroupArchive.getCount();a>n&&(e=this.soundGroupArchive.popFirst());)e.poolRef=null,delete this.soundGroupArchiveById[e.id],a-=1;for(;this.usedMemory>r&&(i=this.soundArchive.popFirst());)i.poolRef=null,delete this.soundArchiveById[i.id],this.freeSound(i)},n.prototype.playSound=function(t,e,i,n,r){if(!this.muted){var o=this.channels[t];if(!o.muted){var s=this.getSound(e);s||(s=this.createSound(e,t)),i=i||1,s.play(o.volume*i,n,r)}}},n.prototype.playSoundGroup=function(t,e,i,n,r){if(!this.muted){var o=this.channels[t];if(o&&!o.muted){var s=this.getSoundGroup(e);if(!s)return console.warn('SoundGroup "'+e+'" does not exist.');i=i||1,s.play(i*o.volume,n,r)}}},n.prototype.createSoundGroup=function(t,e,i){if(!this.getSoundGroup(t)){var n=new a(t,e.id,e.vol,e.pitch,i);this.soundGroupsById[t]=n}},n.prototype.createSoundGroups=function(t,e){var i=void 0!==e&&this.channels[e].muted;for(var n in t)this.createSoundGroup(n,t[n],i)}},{"./AudioChannel.js":8,"./ISound.js":10,"./OrderedList":11,"./Sound.js":12,"./SoundBuffered.js":13,"./SoundGroup.js":14}],10:[function(t,e,i){function n(){this.playing=!1,this.stopping=!1,this.fade=0,this.usedMemory=0,this.poolRef=null,this.id=null,this.volume=1,this.pan=0,this.loop=!1,this.pitch=0,this._loaded=!1,this._loading=!1,this._unloading=!1,this._playTriggered=0,this._onLoadQueuedCallback=[]}e.exports=n,n.prototype.setId=function(t){this.id=t,this._loaded=!1},n.prototype.load=function(t){return this.id?this._loaded?t&&t(null,this):(t&&this._onLoadQueuedCallback.push(t),this._loading?void 0:(this._loading=!0,this._load())):t&&t("noId")},n.prototype._finalizeLoad=function(t){var e=this.audioManager.settings.maxPlayLatency;this._loaded=!t,this._loading=!1;for(var i=0;i<this._onLoadQueuedCallback.length;i++)this._onLoadQueuedCallback[i](t,this);return this._onLoadQueuedCallback=[],this._unloading?(this._unloading=!1,void this.unload()):void(this._loaded&&this._playTriggered&&((this.loop||Date.now()-this._playTriggered<e)&&this._play(),this._playTriggered=0))},n.prototype.cancelOnLoadCallbacks=function(){this._onLoadQueuedCallback=[]},n.prototype.play=function(t,e,i){return void 0!==t&&null!==t&&this.setVolume(t),void 0!==e&&null!==e&&this.setPan(e),this._loaded?this.loop&&this.playing?void this._updatePlayPitch(i):void this._play(i):(this._playTriggered=Date.now(),void this.load())},n.prototype.init=function(){},n.prototype.setVolume=function(t){this.volume=t},n.prototype.setPan=function(t){this.pan=t},n.prototype.setLoop=function(t){this.loop=t},n.prototype.setPitch=function(t){this.pitch=t},n.prototype._updatePlayPitch=function(t){},n.prototype._play=function(t){this.playing=!0,console.log('ISound play call: "'+this.id+'"')},n.prototype.stop=function(t){return this.playing=!1,t&&t()},n.prototype._load=function(){return console.log("ISound load call: "+this.id),this._finalizeLoad(null)},n.prototype.unload=function(){return this._playTriggered=0,this.setLoop(!1),this.fade=0,this.pitch=0,this.stop(),this._loading?(this._unloading=!0,!1):(this.audioManager.usedMemory-=this.usedMemory,this.setVolume(1),this.setPan(0),this.id=null,this._loaded=!1,this.usedMemory=0,!0)}},{}],11:[function(t,e,i){function n(t,e,i,n){this.object=t,this.previous=e,this.next=i,this.container=n}function r(t){this.count=0,this.first=null,this.last=null,this.cmpFunc=t}r.prototype.add=function(t){var e=new n(t,null,null,this);if(this.count+=1,null===this.first)return this.first=e,this.last=e,e;var i=this.cmpFunc(t,this.first.object);if(i<0)return e.next=this.first,this.first.previous=e,this.first=e,e;var r=this.cmpFunc(t,this.last.object);if(r>=0)return e.previous=this.last,this.last.next=e,this.last=e,e;var o;if(i+r<0){for(o=this.first.next;this.cmpFunc(t,o.object)>=0;)o=o.next;e.next=o,e.previous=o.previous,e.previous.next=e,o.previous=e}else{for(o=this.last.previous;this.cmpFunc(t,o.object)<0;)o=o.previous;e.previous=o,e.next=o.next,e.next.previous=e,o.next=e}return e},r.prototype.removeByRef=function(t){return!(!t||t.container!==this)&&(this.count-=1,null===t.previous?this.first=t.next:t.previous.next=t.next,null===t.next?this.last=t.previous:t.next.previous=t.previous,t.previous=null,t.next=null,t.container=null,!0)},r.prototype.moveToTheBeginning=function(t){return!(!t||t.container!==this)&&(null===t.previous||(t.previous.next=t.next,this.last===t?this.last=t.previous:t.next.previous=t.previous,t.previous=null,t.next=this.first,t.next.previous=t,this.first=t,!0))},r.prototype.moveToTheEnd=function(t){return!(!t||t.container!==this)&&(null===t.next||(t.next.previous=t.previous,this.first===t?this.first=t.next:t.previous.next=t.next,t.next=null,t.previous=this.last,t.previous.next=t,this.last=t,!0))},r.prototype.possess=function(t){return t&&t.container===this},r.prototype.popFirst=function(){var t=this.first;if(!t)return null;this.count-=1;var e=t.object;return this.first=t.next,null!==this.first&&(this.first.previous=null),t.next=null,t.container=null,e},r.prototype.popLast=function(){var t=this.last;if(!t)return null;this.count-=1;var e=t.object;return this.last=t.previous,null!==this.last&&(this.last.next=null),t.previous=null,t.container=null,e},r.prototype.getFirst=function(){return this.first&&this.first.object},
r.prototype.getLast=function(){return this.last&&this.last.object},r.prototype.clear=function(){for(var t=this.first;t;t=t.next)t.container=null;this.count=0,this.first=null,this.last=null},r.prototype.getCount=function(){return this.count},r.prototype.forEach=function(t,e){for(var i=this.first;i;i=i.next)t(i.object,e)},r.prototype.forEachReverse=function(t,e){for(var i=this.last;i;i=i.previous)t(i.object,e)},r.prototype.reposition=function(t){if(t.container!==this)return this.add(t.object);var e=t.previous,i=t.next,n=t.object;for(null===i?this.last=e:i.previous=e,null===e?this.first=i:e.next=i;null!==e&&this.cmpFunc(n,e.object)<0;)i=e,e=e.previous;for(;null!==i&&this.cmpFunc(n,i.object)>=0;)e=i,i=i.next;return t.next=i,null===i?this.last=t:i.previous=t,t.previous=e,null===e?this.first=t:e.next=t,t},e.exports=r},{}],12:[function(t,e,i){function n(){o.call(this);var t=new Audio;t.loop=!1,t.type="audio/mpeg",this._audio=t,this.audioContext&&(this.source=this.audioContext.createMediaElementSource(t),this.source.connect(this.audioContext.destination))}var r=t("util").inherits,o=t("./ISound.js"),s={playAudioWhenScreenIsLocked:!1};r(n,o),e.exports=n,n.prototype.setVolume=function(t){this.volume=this._audio.volume=t},n.prototype.setLoop=function(t){this.loop=this._audio.loop=t},n.prototype._load=function(){function t(t){r._finalizeLoad(t)}function e(){this.removeEventListener("canplaythrough",e),this.removeEventListener("error",i),r.usedMemory=this.duration,r.audioManager.usedMemory+=this.duration,r._finalizeLoad(null)}function i(n){this.removeEventListener("canplaythrough",e),this.removeEventListener("error",i),t(n)}function n(t){r._loading=!0,r._audio.addEventListener("canplaythrough",e),r._audio.addEventListener("error",i),r._audio.src=t,r._audio.load()}var r=this,o=this.audioManager.settings.getFileUri,s=this.audioManager.settings.audioPath;if(o.length>2)o(s,this.id,function(e,i){return e?t(e):void n(i)});else try{var a=o(s,this.id);if(!a)return t("emptyUri");n(a)}catch(e){t(e)}},n.prototype.unload=function(){o.prototype.unload.call(this)&&(this._audio.volume=1,this._audio.src="",this._audio.load())},n.prototype._play=function(t){this._audio.volume=this.volume,this._audio.pause(),this._audio.currentTime=0,this._audio.play(s),this.playing=!0},n.prototype.stop=function(t){return this._audio.pause(),this._audio.currentTime=0,this._playTriggered=0,this.playing=!1,t&&t()}},{"./ISound.js":10,util:4}],13:[function(t,e,i){function n(){o.call(this),this.buffer=null,this.source=null,this.sourceConnector=null,this.gain=null,this.panNode=null,this.rawAudioData=null,this._playPitch=0,this._fadeTimeout=null,this._onStopCallback=null,this._audioNodeReady=!1,this._loopStart=0,this._loopEnd=0,this.init()}var r=t("util").inherits,o=t("./ISound.js"),s=1e-6;r(n,o),e.exports=n,n.prototype._createAudioNodes=function(){if(!this._audioNodeReady&&this.audioContext){var t,e=this.audioContext,i=e.createGain();t=e.createStereoPanner?e.createStereoPanner():e.createPanner(),i.connect(t),t.connect(e.destination),i.gain.value=0,this.sourceConnector=i,this.gain=i.gain,this.panNode=t,this._audioNodeReady=!0}},n.prototype._destroyAudioNodes=function(){if(this._audioNodeReady){var t=this.audioContext,e=this.panNode,i=this.sourceConnector;i.disconnect(e),e.disconnect(t.destination),this.source&&(this.source.disconnect(i),this.source.onended=null,this.source=null),this.sourceConnector=null,this.gain=null,this.panNode=null,this.rawAudioData=null,this._audioNodeReady=!1}},n.prototype.init=function(){function t(t){i.buffer=t,i.usedMemory=t.duration,i.audioManager.usedMemory+=t.duration,i.rawAudioData=null,i._loaded&&i._playTriggered&&((i.loop||Date.now()-i._playTriggered<n)&&i._play(),i._playTriggered=0)}function e(){console.error("decode audio failed for sound ",i.id)}if(this._createAudioNodes(),this.rawAudioData){var i=this,n=this.audioManager.settings.maxPlayLatency,r=this.audioContext;r.decodeAudioData(this.rawAudioData,t,e)}},n.prototype.setVolume=function(t){if(this.volume=t,this.playing){if(!this.fade)return void(this.gain.value=t);t<=0&&(t=s);var e=this.audioContext.currentTime;this.gain.cancelScheduledValues(e),this.gain.setValueAtTime(this.gain.value||s,e),this.gain.linearRampToValueAtTime(t,e+this.fade)}},n.prototype.setPan=function(t){this.pan=t,this.panNode&&(this.panNode.pan?this.panNode.pan.value=t:this.panNode.setPosition(t,0,.2))},n.prototype.setLoop=function(t,e,i){this.loop=!!t,this._loopStart=e||0,this._loopEnd=i||0,this.source&&this.buffer&&(this.source.loop=t,this._setLoopPoints())},n.prototype._setLoopPoints=function(){this.source.loopStart=this._loopStart||0;var t=this._loopEnd;t<0&&(t=this.buffer.duration+t),t<0&&(t=0),this.source.loopEnd=t||this.buffer.duration},n.prototype.setPitch=function(t,e){this.pitch=t,this._setPlaybackRate(e)},n.prototype._updatePlayPitch=function(t){!t&&0!==t||t===this._playPitch||(this._playPitch=t,this._setPlaybackRate(0))},n.prototype._setPlaybackRate=function(t){if(this.source){var e=Math.pow(2,(this._playPitch+this.pitch)/12);if(!t)return void(this.source.playbackRate.value=e);var i=this.audioContext.currentTime;this.source.playbackRate.cancelScheduledValues(i),this.source.playbackRate.setValueAtTime(this.source.playbackRate.value||s,i),this.source.playbackRate.linearRampToValueAtTime(e,i+t)}},n.prototype._load=function(){function t(t){n._finalizeLoad(t)}function e(t){n.buffer=t,n.usedMemory=t.duration,n.audioManager.usedMemory+=t.duration,n._finalizeLoad(null)}function i(i){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=function(){if(4===~~r.readyState)return 200!==~~r.status&&0!==~~r.status?t("xhrError:"+r.status):void(n.audioContext?n.audioContext.decodeAudioData(r.response,e,t):(n.rawAudioData=r.response,n._finalizeLoad(null)))},r.open("GET",i,!0),r.send()}var n=this;this._createAudioNodes();var r=this.audioManager.settings.getFileUri,o=this.audioManager.settings.audioPath;if(r.length>2)r(o,this.id,function(e,n){return e?t(e):void i(n)});else try{var s=r(o,this.id);if(!s)return t("emptyUri");i(s)}catch(e){t(e)}},n.prototype.unload=function(){o.prototype.unload.call(this)&&(this._fadeTimeout&&(this._onStopCallback=null,this._stopAndClear()),this.buffer=null,this.source&&(this.source.onended=null,this.source.stop(0),this.source=null),this._destroyAudioNodes())},n.prototype._play=function(t){if(!this.buffer)return void(this._playTriggered=Date.now());this.playing=!0;var e=this.audioContext.currentTime;if(this.gain.cancelScheduledValues(e),this.fade?(this.gain.setValueAtTime(this.gain.value||s,e),this.gain.linearRampToValueAtTime(this.volume||s,e+this.fade)):this.gain.value=this.volume,this._fadeTimeout)return this._onStopCallback=null,this.source.onended=null,this.stopping=!1,window.clearTimeout(this._fadeTimeout),void(this._fadeTimeout=null);this.source&&(this.source.disconnect(this.sourceConnector),this.source.onended=null);var i=this.source=this.audioContext.createBufferSource();i.connect(this.sourceConnector);var n=this;i.onended=function(){n.playing=!1,i.onended=null,n.source=null},this._playPitch=t||0,(t||this.pitch)&&this._setPlaybackRate(0),i.loop=this.loop,i.buffer=this.buffer,this._setLoopPoints(),i.start(0)},n.prototype._stopAndClear=function(){this.stopping=!1,this.source.onended=null,this.source.stop(0),this.source=null,this._fadeTimeout&&(window.clearTimeout(this._fadeTimeout),this._fadeTimeout=null),this._onStopCallback&&(this._onStopCallback(),this._onStopCallback=null)},n.prototype.stop=function(t){if(!this.playing&&!this.stopping)return t&&t();if(this._playTriggered=0,this.stopping=!0,this.playing=!1,!this.source)return t&&t();if(this._onStopCallback=t,!this._fadeTimeout){if(this.fade){var e=this,i=this.audioContext.currentTime;return this.gain.cancelScheduledValues(i),this.gain.setValueAtTime(this.gain.value||s,i),this.gain.linearRampToValueAtTime(s,i+this.fade),void(this._fadeTimeout=window.setTimeout(function(){e._fadeTimeout=null,e._stopAndClear()},1e3*this.fade))}this._stopAndClear()}}},{"./ISound.js":10,util:4}],14:[function(t,e,i){function n(t,e,i,n,r){this.id=t,this.soundIds=e,this.volumes=i||[],this.pitches=n||[],this.soundIndex=0,this.volIndex=0,this.pitchIndex=0,this.poolRef=null,this._ready=!1,0===this.volumes.length&&this.volumes.push(1),0===this.pitches.length&&this.pitches.push(0),r||this._createSounds()}e.exports=n,n.prototype._createSounds=function(){for(var t=this.soundIds,e=0;e<t.length;e++)this.audioManager.loadSound(t[e]);this._ready=!0},n.prototype.play=function(t,e,i){if(0!==this.soundIds.length){this._ready||this._createSounds();var n=this.soundIds[this.soundIndex++],r=this.audioManager.getSound(n);if(!r)return console.warn("[Sound Group: "+this.id+"] sound id "+n+"  cannot be played.");t=t||1,i=i||0,t*=this.volumes[this.volIndex++],i+=this.pitches[this.pitchIndex++],r.play(t,e,i),this.soundIndex>=this.soundIds.length&&(this.soundIndex=0),this.volIndex>=this.volumes.length&&(this.volIndex=0),this.pitchIndex>=this.pitches.length&&(this.pitchIndex=0)}},n.prototype.verifySounds=function(){for(var t=0;t<this.soundIds.length;t++){var e=this.soundIds[t];this.audioManager.createSound(e)}}},{}],15:[function(t,e,i){function n(t,e){function i(e){e.preventDefault(),t.style.left=e.clientX-o+"px",t.style.top=e.clientY-s+"px"}function n(t){t.preventDefault(),r.removeEventListener("mouseup",n),r.removeEventListener("mousemove",i)}var r=document;rect=t.getBoundingClientRect();var o=e.clientX-rect.left,s=e.clientY-rect.top;r.addEventListener("mousemove",i,!1),r.addEventListener("mouseup",n,!1)}var r=document.getElementsByTagName("body")[0];i.createDom=function(t,e,i){i=i||r;var n=document.createElement(t);return i.appendChild(n),e&&(n.className=e),n},i.createDiv=function(t,e){return i.createDom("div",t,e)},i.removeDom=function(t,e){e=e||r,e.removeChild(t)},i.makeButton=function(t,e){return t.addEventListener("mousedown",function(i){i.stopPropagation(),i.preventDefault(),e(i,t)}),t},i.makeDragable=function(t,e){return e=e||t,t.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),n(e,t)}),t}},{}],16:[function(t,e,i){function n(t,e,i,n){this.start=t,this.end=t+e,this.duration=e,this.properties=n,this.to=i}function r(t,e){if(this._object=t,(null===e||void 0===e)&&t instanceof Array){e=[];for(var i=0;i<t.length;i+=1)e[i]=i}this._properties=e,this._from=null,this._interpolations=null,this._index=0,this._transitions=[],this._relative=!1,this._time=0,this._duration=0}var o=t("./Transition"),s=t("./TransitionRelative"),a=t("./easing"),u=t("./interpolation");n.prototype.update=function(t){for(var e=0;e<this.properties.length;e+=1){var i=this.properties[e];t[i]=this.to[i]}},e.exports=r,r.prototype.relative=function(t){return this._relative=t,this},r.prototype.reset=function(){return this._index=0,this._duration=0,this._transitions=[],this},r.prototype.interpolations=function(t){for(var e=0;e<this._properties.length;e+=1){var i=this._properties[e],n=t[i];void 0!==n?"string"==typeof n&&(void 0===u[n]?(console.warn("[AbstractTween.interpolations] Given interpolation does not exist"),t[i]=u.linear):t[i]=u[n]):t[i]=u.linear}return this._interpolations=t,this},r.prototype.from=function(t){return this._from=t,this._transitions.length>0&&(this._transitions[0].from=t),this},r.prototype._setFrom=function(){this._from={};for(var t=0;t<this._properties.length;t+=1){var e=this._properties[t];this._from[e]=this._relative===!0?0:this._object[e]}return this._from},r.prototype._getLastTransitionEnding=function(){return this._transitions.length>0?this._relative===!0?this._setFrom():this._transitions[this._transitions.length-1].to:null===this._from?this._setFrom():this._from},r.prototype.to=function(t,e,i,n,r){"string"==typeof i&&(void 0===a[i]?(console.warn("[AbstractTween.to] Given easing does not exist"),i=void 0):i=a[i]);var u=this._getLastTransitionEnding(),h=this._relative===!0?s:o,l=new h(this._properties,u,t,this._duration,e,i,n,this._interpolations,r);return this._transitions.push(l),this._duration+=e,this},r.prototype.wait=function(t){var e=this._getLastTransitionEnding();return this._transitions.push(new n(this._duration,t,e,this._properties)),this._duration+=t,this},r.prototype._update=function(){for(var t=this._transitions[this._index];t.end<=this._time;){if(this._index===this._transitions.length-1)return void t.update(this._object,1);this._relative===!0&&t.update(this._object,1),t=this._transitions[++this._index]}for(;this._time<=t.start;){if(0===this._index)return void t.update(this._object,0);this._relative===!0&&t.update(this._object,0),t=this._transitions[--this._index]}t.update(this._object,(this._time-t.start)/t.duration)},r.prototype._validate=function(){return 0!==this._transitions.length||(console.warn("[AbstractTween._validate] Cannot start a tween with no transition:",this),!1)}},{"./Transition":31,"./TransitionRelative":32,"./easing":35,"./interpolation":38}],17:[function(t,e,i){function n(){this._duration=0,this._onComplete=null,this._iterations=1,this._pingpong=!1,this._persist=!1}e.exports=n,n.prototype.setSpeed=function(t){0===t?0!==this._speed&&(this._startTime+=this._time/this._speed-this._time):0===this._speed?this._startTime+=this._time-this._time/t:this._startTime+=this._time/this._speed-this._time/t,this._speed=t,null!==this._player&&this._player._onPlayableChanged(this)},n.prototype.onComplete=function(t){return this._onComplete=t,this},n.prototype.getDuration=function(){return this._duration*this._iterations/this._speed},n.prototype._setDuration=function(t){this._duration=t,null!==this._player&&this._player._onPlayableChanged(this)},n.prototype._extendDuration=function(t){this._duration+=t,null!==this._player&&this._player._onPlayableChanged(this)},n.prototype._getEndTime=function(){return this._speed>0?this._startTime+this.getDuration():this._speed<0?this._startTime:1/0},n.prototype._setStartTime=function(t){this._speed>0?this._startTime=t:this._speed<0?this._startTime=t-this.getDuration():this._startTime=1/0},n.prototype._getStartTime=function(){return this._speed>0?this._startTime:this._speed<0?this._startTime+this.getDuration():-(1/0)},n.prototype._isTimeWithin=function(t){return this._speed>0?this._startTime<t&&t<this._startTime+this.getDuration():!(this._speed<0)||this._startTime+this.getDuration()<t&&t<this._startTime},n.prototype._overlaps=function(t,e){return this._speed>0?(this._startTime-e)*(this._startTime+this.getDuration()-t)<=0:!(this._speed<0)||(this._startTime+this.getDuration()-e)*(this._startTime-t)<=0},n.prototype.goToEnd=function(){return this.goTo(this.getDuration(),this._iterations-1)},n.prototype.loop=function(){return this.iterations(1/0)},n.prototype.iterations=function(t){return t<0?(console.warn("[BriefExtension.iterations] Number of iterations cannot be negative"),this):(this._iterations=t,null!==this._player&&this._player._onPlayableChanged(this),this)},n.prototype.persist=function(t){return this._persist=t,this},n.prototype.pingpong=function(t){return this._pingpong=t,null!==this._player&&this._player._onPlayableChanged(this),this},n.prototype._complete=function(t){return this._persist===!0?(this._startTime+=t,void this._player._onPlayableChanged(this)):this._player._inactivate(this)===!1?this:void(null!==this._onComplete&&this._onComplete(t))};var r=1e-6;n.prototype._moveTo=function(t,e,i){e*=this._speed;var n;if(0!==e)if(1===this._iterations)this._time=(t-this._startTime)*this._speed,e>0?this._time>=this._duration?(n=this._time-this._duration,this._time=this._duration):this._time<0:e<0&&this._time<=0&&(n=this._time,this._time=0);else{t=(t-this._startTime)*this._speed;var o=t/this._duration;e>0?0<o&&o<this._iterations?this._time=t%this._duration:(n=(o-this._iterations)*this._duration,this._time=this._duration*(1-(Math.ceil(this._iterations)-this._iterations))):e<0&&(0<o&&o<this._iterations?this._time=t%this._duration:(n=o*this._duration,this._time=0)),this._pingpong===!0&&(void 0===n?0===(1&Math.ceil(o))&&(this._time=this._duration-this._time):Math.ceil(this._iterations)===this._iterations&&0===(1&Math.ceil(this._iterations))&&(this._time=this._duration-this._time))}void 0!==i&&void 0===n&&(e>0&&this.duration-this._time<r?(n=i,this._time=this._duration):e<0&&this._time<r&&(n=i,this._time=0)),this._update(e,n),null!==this._onUpdate&&(void 0===n?this._onUpdate(this._time,e):this._onUpdate(this._time,e-n)),void 0!==n&&this._complete(n)}},{}],18:[function(t,e,i){function n(){o.call(this),s.call(this)}var r=t("./inherit"),o=t("./Playable"),s=t("./BriefExtension");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,r(n,s),e.exports=n},{"./BriefExtension":17,"./Playable":23,"./inherit":37}],19:[function(t,e,i){function n(){o.call(this),s.call(this)}var r=t("./inherit"),o=t("./Player"),s=t("./BriefExtension");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,r(n,s),e.exports=n,n.prototype._onAllPlayablesRemoved=function(){this._duration=0},n.prototype._updateDuration=function(){var t,e,i,n=0;for(t=this._activePlayables.first;null!==t;t=t.next)e=t.object,i=e._getStartTime()+e.getDuration(),i>n&&(n=i);for(t=this._inactivePlayables.first;null!==t;t=t.next)e=t.object,i=e._getStartTime()+e.getDuration(),i>n&&(n=i);this._setDuration(n)},n.prototype._onPlayableChanged=n.prototype._updateDuration,n.prototype._onPlayableRemoved=n.prototype._updateDuration},{"./BriefExtension":17,"./Player":24,"./inherit":37}],20:[function(t,e,i){function n(t){return this instanceof n==!1?new n(t):(r.call(this),void(this._duration=t))}var r=t("./BriefPlayable");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./BriefPlayable":18}],21:[function(t,e,i){function n(t,e,i,n){this.object=t,this.previous=e,this.next=i,this.container=n}function r(){this.first=null,this.last=null,this.length=0}e.exports=r,r.prototype.addFront=function(t){var e=new n(t,null,this.first,this);return null===this.first?(this.first=e,this.last=e):(this.first.previous=e,this.first=e),this.length+=1,e},r.prototype.add=r.prototype.addFront,r.prototype.addBack=function(t){var e=new n(t,this.last,null,this);return null===this.first?(this.first=e,this.last=e):(this.last.next=e,this.last=e),this.length+=1,e},r.prototype.popFront=function(t){var e=this.first.object;return this.removeByReference(this.first),e},r.prototype.pop=r.prototype.popFront,r.prototype.popBack=function(t){var e=this.last.object;return this.removeByReference(this.last),e},r.prototype.addBefore=function(t,e){var i=new n(e,t.previous,t,this);return null!==t.previous&&(t.previous.next=i),t.previous=i,this.first===t&&(this.first=i),this.length+=1,i},r.prototype.addAfter=function(t,e){var i=new n(e,t,t.next,this);return null!==t.next&&(t.next.previous=i),t.next=i,this.last===t&&(this.last=i),this.length+=1,i},r.prototype.moveToTheBeginning=function(t){return!(!t||t.container!==this)&&(null===t.previous||(t.previous.next=t.next,this.last===t?this.last=t.previous:t.next.previous=t.previous,t.previous=null,t.next=this.first,t.next.previous=t,this.first=t,!0))},r.prototype.moveToTheEnd=function(t){return!(!t||t.container!==this)&&(null===t.next||(t.next.previous=t.previous,this.first===t?this.first=t.next:t.previous.next=t.next,t.next=null,t.previous=this.last,t.previous.next=t,this.last=t,!0))},r.prototype.removeByReference=function(t){return t.container!==this?(console.warn("[DoublyList.removeByReference] Trying to remove a node that does not belong to the list"),t):(null===t.next?this.last=t.previous:t.next.previous=t.previous,null===t.previous?this.first=t.next:t.previous.next=t.next,t.next=null,t.previous=null,t.container=null,this.length-=1,null)},r.prototype.remove=function(t){for(var e=this.first;null!==e;e=e.next)if(e.object===t)return this.removeByReference(e),!0;return!1},r.prototype.getNode=function(t){for(var e=this.first;null!==e;e=e.next)if(e.object===t)return e;return null},r.prototype.clear=function(){for(var t=this.first;null!==t;t=t.next)t.container=null;this.first=null,this.last=null,this.length=0},r.prototype.forEach=function(t,e){for(var i=this.first;i;i=i.next)t(i.object,e)},r.prototype.toArray=function(){for(var t=[],e=this.first;null!==e;e=e.next)t.push(e.object);return t}},{}],22:[function(t,e,i){function n(t,e){if(this instanceof n==!1)return new n(t,e);r.call(this),this._tweensPerObject={},this._tweens=[],this._propertyChains={},this._propertyChainStrings=[];for(var i,s,a={},u={},h=0;h<e.length;h+=1){var l=e[h];if(s=l.substring(0,l.lastIndexOf(".")),void 0===u[s]){for(var p=l.split("."),c=p.length-1,d=t,f=0;f<c;f+=1)d=d[p[f]];i=p[c],d[i]instanceof Array?(u[l]=null,a[l]=d[i],this._propertyChainStrings.push(l),this._propertyChains[l]=p):(u[s]=[i],a[s]=d,this._propertyChainStrings.push(s),p.pop(),this._propertyChains[s]=p)}else i=l.substring(l.lastIndexOf(".")+1),u[s].push(i)}for(s in a){var _=a[s],v=u[s],y=new o(_,v);this._tweens.push(y),this._tweensPerObject[s]=y}}var r=t("./BriefPlayable"),o=t("./AbstractTween");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.relative=function(t){for(var e=0;e<this._tweens.length;e+=1)this._tweens[e].relative(t);return this},n.prototype.reset=function(){for(var t=0;t<this._tweens.length;t+=1)this._tweens[t].reset();return this._duration=0,this},n.prototype.interpolations=function(t){for(var e=0;e<this._propertyChainStrings.length;e+=1){for(var i=this._propertyChainStrings[e],n=this._propertyChains[i],r=n.length,o=t,s=0;s<r&&void 0!==o;s+=1)o=o[n[s]];void 0!==o&&this._tweensPerObject[i].interpolations(o)}return this},n.prototype.from=function(t){for(var e=0;e<this._propertyChainStrings.length;e+=1){for(var i=this._propertyChainStrings[e],n=this._propertyChains[i],r=n.length,o=t,s=0;s<r&&void 0!==o;s+=1)o=o[n[s]];void 0!==o&&this._tweensPerObject[i].from(o)}return this},n.prototype.to=function(t,e,i,n,r){for(var o=0;o<this._propertyChainStrings.length;o+=1){for(var s=this._propertyChainStrings[o],a=this._propertyChains[s],u=a.length,h=t,l=0;l<u;l+=1)h=h[a[l]];var p=r;for(l=0;l<u&&void 0!==p;l+=1)p=p[a[l]];this._tweensPerObject[s].to(h,e,i,n,p)}return this._extendDuration(e),this},n.prototype.wait=function(t){for(var e=0;e<this._tweens.length;e+=1)this._tweens[e].wait(t);return this._extendDuration(t),this},n.prototype._update=function(){for(var t=0;t<this._tweens.length;t+=1){var e=this._tweens[t];e._time=this._time,e._update()}}},{"./AbstractTween":16,"./BriefPlayable":18}],23:[function(t,e,i){function n(){this._player=null,this._handle=null,this._startTime=0,this._time=0,this._speed=1,this._onStart=null,this._onPause=null,this._onResume=null,this._onUpdate=null,this._onStop=null}e.exports=n,Object.defineProperty(n.prototype,"speed",{get:function(){return this._speed},set:function(t){this.setSpeed(t)}}),Object.defineProperty(n.prototype,"time",{get:function(){return this._time},set:function(t){this.goTo(t)}}),n.prototype.onStart=function(t){return this._onStart=t,this},n.prototype.onUpdate=function(t){return this._onUpdate=t,this},n.prototype.onStop=function(t){return this._onStop=t,this},n.prototype.onPause=function(t){return this._onPause=t,this},n.prototype.onResume=function(t){return this._onResume=t,this},n.prototype.tweener=function(t){return null===t||void 0===t?(console.warn("[Playable.tweener] Given tweener is invalid:",t),this):(this._player=t,this)},n.prototype.setSpeed=function(t){return t<0?void console.warn("[Playable.speed] This playable cannot have negative speed"):(0===t?0!==this._speed&&(this._startTime+=this._time/this._speed-this._time):0===this._speed?this._startTime+=this._time-this._time/t:this._startTime+=this._time/this._speed-this._time/t,this._speed=t,void(null!==this._player&&this._player._onPlayableChanged(this)))},n.prototype.goTo=function(t,e){return 1===this._iterations?0===this._speed?this._startTime+=this._time-t:this._startTime+=(this._time-t)/this._speed:(e=e||0,0===this._speed?this._startTime+=this._time-t-e*this._duration:this._startTime+=(this._time-t-e*this._duration)/this._speed),this._time=t,null!==this._player&&this._player._onPlayableChanged(this),this},n.prototype.goToBeginning=function(){return this.goTo(0,0)},n.prototype.getDuration=function(){return 1/0},n.prototype._getEndTime=function(){return 1/0},n.prototype._setStartTime=function(t){this._startTime=t},n.prototype._getStartTime=function(){return this._startTime},n.prototype._isWithin=function(t){return this._startTime<t},n.prototype._overlaps=function(t,e){return(t-this._startTime)*(e-this._startTime)<=0},n.prototype.rewind=function(){return this.goTo(0,0),this},n.prototype.delay=function(t){return this.start(-t)},n.prototype.start=function(t){return null===this._player&&(this._player=TINA._startDefaultTweener()),this._validate()===!1?this:this._player._add(this)===!1?this:(void 0!==t&&null!==t||(t=0),this._startTime=this._player._time-t,this)},n.prototype._start=function(){null!==this._onStart&&this._onStart()},n.prototype.stop=function(){return null===this._player?void console.warn("[Playable.stop] Trying to stop a playable that was never started."):this._player._remove(this)===!1?this:(null!==this._onStop&&this._onStop(),this)},n.prototype.resume=function(){return this._player._activate(this)===!1?this:(null!==this._onResume&&this._onResume(),this)},n.prototype.pause=function(){return this._player._remove(this)===!1?this:(null!==this._onPause&&this._onPause(),this)},n.prototype._moveTo=function(t,e){e*=this._speed,this._time=(t-this._startTime)*this._speed,this._update(e),null!==this._onUpdate&&this._onUpdate(this._time,e)},n.prototype._update=function(){},n.prototype._validate=function(){}},{}],24:[function(t,e,i){function n(){r.call(this),this._activePlayables=new o,this._inactivePlayables=new o,this._playablesToRemove=new o,this._silent=!0,this._debug=!1}var r=t("./Playable"),o=t("./DoublyList");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._add=function(t){return null===t._handle?(t._handle=this._inactivePlayables.add(t),t._player=this,!0):t._handle.container===this._playablesToRemove?(t._handle=this._playablesToRemove.removeByReference(t._handle),!0):t._handle.container===this._activePlayables?(this._warn("[Player._add] Playable is already present, and active"),!1):t._handle.container===this._inactivePlayables?(this._warn("[Player._add] Playable is already present, but inactive (could be starting)"),!1):(this._warn("[Player._add] Playable is used elsewhere"),!1)},n.prototype._remove=function(t){return null===t._handle?(this._warn("[Player._remove] Playable is not being used"),!1):t._handle.container===this._activePlayables?(t._handle=this._playablesToRemove.add(t._handle),!0):t._handle.container===this._inactivePlayables?(t._handle=this._inactivePlayables.removeByReference(t._handle),!0):t._handle.container===this._playablesToRemove?(this._warn("[Player._remove] Playable is already being removed"),!1):(this._warn("[Player._add] Playable is used elsewhere"),!1)},n.prototype.remove=function(t){return t._handle.container===this._activePlayables&&t.stop(),this._remove(t),this._onPlayableRemoved(t),this},n.prototype.removeAll=function(){for(var t=this._activePlayables.first;null!==t;){var e=t.next;t.object.stop(),t=e}return this._handlePlayablesToRemove(),this},n.prototype.possess=function(t){return null!==t._handle&&(t._handle.container===this._activePlayables||t._handle.container===this._inactivePlayables)},n.prototype._handlePlayablesToRemove=function(){for(;this._playablesToRemove.length>0;){var t=this._playablesToRemove.pop(),e=t.object;e._handle=this._activePlayables.removeByReference(t)}0===this._activePlayables.length&&0===this._inactivePlayables.length&&this._onAllPlayablesRemoved()},n.prototype.clear=function(){return this._activePlayables.clear(),this._inactivePlayables.clear(),this._playablesToRemove.clear(),this._controls.clear(),this},n.prototype._warn=function(t){this._silent===!1&&console.warn(t),this._debug===!0},n.prototype.silent=function(t){return this._silent=t||!1,this},n.prototype.debug=function(t){return this._debug=t||!1,this},n.prototype.stop=function(){for(var t=this._activePlayables.first;null!==t;){var e=t.next,i=t.object;i.stop(),t=e}this._handlePlayablesToRemove(),r.prototype.stop.call(this)},n.prototype._activate=function(t){this._inactivePlayables.removeByReference(t._handle),t._handle=this._activePlayables.addBack(t)},n.prototype._inactivate=function(t){return null===t._handle?void this._warn("[Playable.stop] Cannot stop a playable that is not running"):(this._activePlayables.removeByReference(t._handle),void(t._handle=this._inactivePlayables.addBack(t)))},n.prototype._updatePlayableList=function(t){this._handlePlayablesToRemove();var e,i;t>0?(e=this._time-t,i=this._time):(e=this._time,i=this._time-t);for(var n=this._inactivePlayables.first;null!==n;){var r=n.object;n=n.next,r._overlaps(e,i)&&(this._activate(r),r._start())}},n.prototype._update=function(t,e){this._updatePlayableList(t);for(var i=this._activePlayables.first;null!==i;i=i.next)void 0===e?i.object._moveTo(this._time,t):i.object._moveTo(this._time,t,e)},n.prototype._onPlayableChanged=function(){},n.prototype._onPlayableRemoved=function(){},n.prototype._onAllPlayablesRemoved=function(){}},{"./DoublyList":21,"./Playable":23}],25:[function(e,i,n){function r(t,e){this.time=t,this.values=e}function o(t,e,i,n){this.object=t,this.properties=e,this.records=new u,this.currentRecord=null,this.isIn=!1,this.onIn=i||null,this.onOut=n||null}function s(t){return this instanceof s==!1?new s:(a.call(this),this._duration=1/0,this._slackTime=0,this._maxRecordingDuration=t||1/0,this._recordedObjects=[],this._recordingObjects={},this._recordingObjectLabels=[],this._recording=!0,this._playing=!1,this._smooth=!1,this._onStartRecording=null,this._onStopRecording=null,this._onStartPlaying=null,void(this._onStopPlaying=null))}var a=e("./BriefPlayable"),u=e("./DoublyList");o.prototype.erase=function(t,e){if(e<t){var i=t;t=e,e=i}var n=this.records.last;if(n.object.time<=e){for(;null!==n&&n.object.time>=t;){var r=n.previous;this.records.removeBeReference(n),n=r}return void(null===this.currentRecord.container&&(this.currentRecord=n))}for(var o=this.records.first;null!==o&&o.object.time<=e;){var s=o.next;o.object.time>=t&&this.records.removeBeReference(o),o=s}null===this.currentRecord.container&&(this.currentRecord=o)},o.prototype.record=function(t,e){if(0!==e||null===this.currentRecord||this.currentRecord.time!==t){for(var i=[],n=0;n<this.properties.length;n+=1)i.push(this.object[this.properties[n]]);var o=new r(t,i);return 0===this.records.length?void(this.currentRecord=this.records.add(o)):void(this.currentRecord.object.time<t?this.currentRecord=this.records.addAfter(this.currentRecord,o):this.currentRecord=this.records.addBefore(this.currentRecord,o))}},o.prototype.goTo=function(t){for(;this.currentRecord.object.time<t;)this.currentRecord=this.currentRecord.next;for(;t<this.currentRecord.object.time;)this.currentRecord=this.currentRecord.previous},o.prototype.play=function(e,i,n){var r,o=this.properties.length,s=this.records.first,a=this.records.last;if(r=0===i?this.isIn:this.isIn===!0?s.object.time<e&&e<a.object.time:s.object.time<=e&&e<=a.object.time,r!==this.isIn)this.isIn=!this.isIn,r===!0&&null!==this.onIn&&this.onIn();else if(this.isIn===!1)return;for(var u=null===this.currentRecord.previous?this.currentRecord:this.currentRecord.previous;this.currentRecord.object.time<=e;){u=this.currentRecord;var h=this.currentRecord.next;if(null===h)break;this.currentRecord=h}for(;e<=u.object.time;){this.currentRecord=u;var l=u.previous;if(null===l)break;u=l}var p;if(n){var c=u.object.time,d=this.currentRecord.object.time,f=u.object.values,_=this.currentRecord.object.values,v=d-c,y=(t-c)/v,m=(d-t)/v;for(p=0;p<o;p+=1)this.object[this.properties[p]]=f[p]*y+_[p]*m}else{var g=this.currentRecord.object.values;for(p=0;p<o;p+=1)this.object[this.properties[p]]=g[p]}r===!1&&null!==this.onOut&&this.onOut()},s.prototype=Object.create(a.prototype),s.prototype.constructor=s,i.exports=s,s.prototype.getDuration=function(){
var t;return t=this._playing===!0?this._time>this._maxRecordingDuration?this._maxRecordingDuration:this._time:1/0,t*this._iterations/this._speed},s.prototype.smooth=function(t){return this._smooth=t,this},s.prototype.onStartRecording=function(t){return this._onStartRecording=t,this},s.prototype.onStopRecording=function(t){return this._onStopRecording=t,this},s.prototype.onStartPlaying=function(t){return this._onStartPlaying=t,this},s.prototype.onStopPlaying=function(t){return this._onStopPlaying=t,this},s.prototype.reset=function(){return this._recordedObjects=[],this._recordingObjects={},this._recordingObjectLabels=[],this},s.prototype.record=function(t,e,i,n,r){var s=new o(e,i,n,r);return this._recordingObjects[t]=s,this._recordedObjects.push(s),this._recordingObjectLabels.push(t),this},s.prototype.stopRecordingObject=function(t){delete this._recordingObjects[t];var e=this._recordingObjectLabels.indexOf(t);return e===-1?(console.warn("[Recorder.stopRecordingObject] Trying to stop recording an object that is not being recording:",t),this):(this._recordingObjectLabels.splice(e,1),this)},s.prototype.removeRecordedObject=function(t){var e=this._recordingObjects[t];delete this._recordingObjects[t];var i=this._recordingObjectLabels.indexOf(t);i!==-1&&this._recordingObjectLabels.splice(i,1);var n=this._recordedObjects.indexOf(e);return n===-1?(console.warn("[Recorder.removeRecordedObject] Trying to remove an object that was not recorded:",t),this):(this._recordingObjectLabels.splice(n,1),this)},s.prototype.recording=function(t){return this._recording!==t&&(this._recording=t,this._recording===!0?(this._playing===!0&&(null!==this._onStopPlaying&&this._onStopPlaying(),this._playing=!1),this._duration=1/0,null!==this._player&&this._player._onPlayableChanged(this),null!==this._onStartRecording&&this._onStartRecording()):null!==this._onStopRecording&&this._onStopRecording()),this},s.prototype.playing=function(t){return this._playing!==t&&(this._playing=t,this._playing===!0?(this._recording===!0&&(null!==this._onStopRecording&&this._onStopRecording(),this._recording=!1),this._duration=this._time,this.goToBeginning(this._startTime+this.getDuration()),null!==this._onStartPlaying&&this._onStartPlaying()):null!==this._onStopPlaying&&this._onStopPlaying()),this},s.prototype._update=function(t){var e,i=this._slackTime+this._time;if(this._recording===!0){var n,r;t>0?(n=this._time-this._maxRecordingDuration,r=n>0):(n=this._time,r=n<0);var o=this._recordingObjectLabels.length;for(e=0;e<o;e+=1){var s=this._recordingObjectLabels[e],a=this._recordingObjects[s];a.record(i,t),r===!0&&a.erase(0,n)}n>0&&(this._slackTime+=n,this._setStartTime(this._startTime+n),this._player._onPlayableChanged(this))}else if(this._playing===!0){var u=this._recordedObjects.length;for(e=0;e<u;e+=1)this._recordedObjects[e].play(i,t,this._smooth)}}},{"./BriefPlayable":18,"./DoublyList":21}],26:[function(t,e,i){function n(){return this instanceof n==!1?new n:(this._sequencedPlayables=new s,void r.call(this))}var r=t("./Timeline"),o=t("./Delay"),s=t("./DoublyList");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=function(t){return this._sequencedPlayables.addBack(t),r.prototype.add.call(this,t,this._duration)},n.prototype.addDelay=function(t){return this.add(new o(t))},n.prototype._reconstruct=function(){var t,e,i=this._activePlayables.first;null!==i&&(t=i.object,e=this._time-t._getStartTime());for(var n=0,r=this._sequencedPlayables.first;null!==r;r=r.next){var o=r.object;o._setStartTime(n),n=o._getEndTime()}if(null!==i){var s=(this._getStartTime(),this._time-t._getStartTime()),a=e-s;this._startTime+=a}this._duration=n,null!==this._player&&this._player._onPlayableChanged(this)},n.prototype.substitute=function(t,e){if(0===this._sequencedPlayables.length)return void this._warn("[Sequence.substitute] The sequence is empty!");var i=this._sequencedPlayables.getNode(t);this._sequencedPlayables.addAfter(i,e),this._add(e),this.remove(t)},n.prototype._onPlayableRemoved=function(t){this._sequencedPlayables.remove(t),0!==this._sequencedPlayables.length&&this._reconstruct()},n.prototype._onPlayableChanged=n.prototype._reconstruct},{"./Delay":20,"./DoublyList":21,"./Timeline":29}],27:[function(t,e,i){(function(i){var n,r=t("./DoublyList");"undefined"!=typeof window?n=window:"undefined"!=typeof i?n=i:(console.warn("[TINA] Your environment might not support TINA."),n=this);var o=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}(),s=n.performance||Date,a={_activeTweeners:new r,_inactiveTweeners:new r,_tweenersToRemove:new r,_defaultTweener:null,_startTime:0,_time:0,_running:!1,_onStart:null,_onPause:null,_onResume:null,_onUpdate:null,_onStop:null,_pauseOnLostFocus:!1,_pauseOnLostFocusInitialised:!1,onStart:function(t){return this._onStart=t,this},onUpdate:function(t){return this._onUpdate=t,this},onStop:function(t){return this._onStop=t,this},onPause:function(t){return this._onPause=t,this},isRunning:function(){return this._running===!0},update:function(){var t=s.now()-this._startTime,e=t-this._time;for(e<0?(e=1,this._startTime-=1,this._time+=1):this._time=t;this._tweenersToRemove.length>0;){var i=this._tweenersToRemove.pop();i._handle=this._activeTweeners.removeByReference(i._handle)}for(;this._inactiveTweeners.length>0;){var n=this._inactiveTweeners.pop();n._handle=this._activeTweeners.addBack(n),n._start()}for(var r=this._activeTweeners.first;null!==r;r=r.next)r.object._moveTo(this._time,e);null!==this._onUpdate&&this._onUpdate(this._time,e)},reset:function(){var t=s.now(),e=t-this._time;this._startTime+=e,this._time=0},start:function(){if(this._startAutomaticUpdate()!==!1){for(null!==this._onStart&&this._onStart();this._inactiveTweeners.length>0;){var t=this._inactiveTweeners.first;this._activate(t.object)}return this}},stop:function(){if(this._stopAutomaticUpdate()!==!1){for(;this._activePlayables.length>0;){var t=this._activePlayables.first;t.object.stop()}return null!==this._onStop&&this._onStop(),this}},_startAutomaticUpdate:function(){function t(){a._running===!0&&(a.update(),o(t))}return this._running===!0?(console.warn("[TINA.start] TINA is already running"),!1):(this.reset(),this._running=!0,o(t),!0)},_stopAutomaticUpdate:function(){return this._running===!1?(console.warn("[TINA.pause] TINA is not running"),!1):(this._running=!1,!0)},pause:function(){if(this._stopAutomaticUpdate()!==!1){for(var t=this._activeTweeners.first;null!==t;t=t.next)t.object._pause();return null!==this._onPause&&this._onPause(),this}},resume:function(){if(this._startAutomaticUpdate()!==!1){null!==this._onResume&&this._onResume();for(var t=this._activeTweeners.first;null!==t;t=t.next)t.object._resume();return this}},_initialisePauseOnLostFocus:function(){if(this._pauseOnLostFocusInitialised!==!0){if(void 0===document)return void console.warn("[TINA.pauseOnLostFocus] Cannot pause on lost focus because TINA is not running in a webpage (node.js does not allow this functionality)");var t,e;if("undefined"!=typeof document.hidden?(t="hidden",e="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),"undefined"==typeof document[t])return void console.warn("[Tweener] Cannot pause on lost focus because the browser does not support the Page Visibility API");this._pauseOnLostFocusInitialised=!0;var i=!1;document.addEventListener(e,function(){document[t]&&(i=a.isRunning(),i&&a._pauseOnLostFocus&&a.pause()),document[t]||i&&a._pauseOnLostFocus&&a.resume()},!1)}},pauseOnLostFocus:function(t){return t===!0&&this._pauseOnLostFocusInitialised===!1&&this._initialisePauseOnLostFocus(),this._pauseOnLostFocus=t,this},_add:function(t){return this._running===!1&&this.start(),null===t._handle?(t._handle=this._inactiveTweeners.add(t),void(t._player=this)):t._handle.container===this._tweenersToRemove?void(t._handle=this._tweenersToRemove.removeByReference(t._handle)):void 0},add:function(t){return this._add(t),this},_inactivate:function(t){null!==t._handle&&this._activePlayables.removeByReference(t._handle),t._handle=this._inactivePlayables.addBack(t)},_remove:function(t){if(null!==t._handle)return t._handle.container===this._activeTweeners?void(t._handle=this._tweenersToRemove.add(t._handle)):t._handle.container===this._inactiveTweeners?void(t._handle=this._inactiveTweeners.removeByReference(t._handle)):void 0},remove:function(t){return this._remove(t),this},setDefaultTweener:function(t){return this._defaultTweener=t,this},getDefaultTweener:function(){if(null===this._defaultTweener){var t=this.Timer;this._defaultTweener=new t}return this._defaultTweener},_startDefaultTweener:function(){var t=this.getDefaultTweener();return this._add(t),t}};e.exports=n.TINA=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DoublyList":21}],28:[function(t,e,i){function n(t){return this instanceof n==!1?new n(t):(r.call(this),void(this.tupt=t||1))}var r=t("./Tweener");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._moveTo=function(t,e){this._time+=this.tupt,e=this.tupt,this._update(e),null!==this._onUpdate&&this._onUpdate(this._time,e)},n.prototype.convertToTicks=function(t){return t/this.tupt},n.prototype.convertToTimeUnits=function(t){return t*this.tupt}},{"./Tweener":34}],29:[function(t,e,i){function n(){return this instanceof n==!1?new n:void r.call(this)}var r=t("./BriefPlayer");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=function(t,e){null!==e&&void 0!==e||(e=0),t._setStartTime(e),this._add(t);var i=t._getEndTime();return i>this._duration&&this._setDuration(i),this}},{"./BriefPlayer":19}],30:[function(t,e,i){function n(t){return this instanceof n==!1?new n(t):(r.call(this),void(this._speed=t/1e3||1))}var r=t("./Tweener");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperty(n.prototype,"tups",{get:function(){return 1e3*this._speed},set:function(t){this.speed=t/1e3}}),n.prototype.convertToSeconds=function(t){return t/(1e3*this._speed)},n.prototype.convertToTimeUnits=function(t){return t*this._speed*1e3}},{"./Tweener":34}],31:[function(t,e,i){function n(t,e){var i=this.prop;t[i]=this.from[i]*(1-e)+this.to[i]*e}function r(t,e){for(var i=this.props,n=0;n<this.props.length;n+=1){var r=i[n];t[r]=this.from[r]*(1-e)+this.to[r]*e}}function o(t,e){var i=this.prop;t[i]=this.interps[i](e,this.from[i],this.to[i],this.interpParams[i])}function s(t,e){for(var i=this.props,n=0;n<i.length;n+=1){var r=i[n];t[r]=this.interps[r](e,this.from[r],this.to[r],this.interpParams[r])}}function a(t,e){e=this.easing(e,this.easingParam);var i=this.prop;t[i]=this.from[i]*(1-e)+this.to[i]*e}function u(t,e){var i=this.props;e=this.easing(e,this.easingParam);for(var n=0;n<i.length;n+=1){var r=i[n];t[r]=this.from[r]*(1-e)+this.to[r]*e}}function h(t,e){var i=this.prop;t[i]=this.interps[i](this.easing(e,this.easingParam),this.from[i],this.to[i],this.interpParams[i])}function l(t,e){var i=this.props;e=this.easing(e,this.easingParam);for(var n=0;n<i.length;n+=1){var r=i[n];t[r]=this.interps[r](e,this.from[r],this.to[r],this.interpParams[r])}}function p(t,e,i,n,r,o,s,a,u){this.start=n,this.end=n+r,this.duration=r,this.from=e,this.to=i;var h;o?(h=1,this.easing=o,this.easingParam=s):h=0;var l;null===a?l=0:(l=1,this.interps=a,this.interpParams=u||{});var p;1===t.length?(p=0,this.prop=t[0],this.props=null):(p=1,this.prop=null,this.props=t),this.update=c[h][l][p]}var c=[[[n,r],[o,s]],[[a,u],[h,l]]];e.exports=p},{}],32:[function(t,e,i){function n(t,e){var i=this.prop,n=this.from[i]*(1-e)+this.to[i]*e;t[i]=t[i]+(n-this.prev),this.prev=n}function r(t,e){for(var i=this.props,n=0;n<this.props.length;n+=1){var r=i[n],o=this.from[r]*(1-e)+this.to[r]*e;t[r]=t[r]+(o-this.prevs[r]),this.prevs[r]=o}}function o(t,e){var i=this.prop,n=this.interps[i](e,this.from[i],this.to[i],this.interpParams[i]);t[i]=t[i]+(n-this.prev),this.prev=n}function s(t,e){for(var i=this.props,n=0;n<i.length;n+=1){var r=i[n],o=this.interps[r](e,this.from[r],this.to[r],this.interpParams[r]);t[r]=t[r]+(o-this.prevs[r]),this.prevs[r]=o}}function a(t,e){e=this.easing(e,this.easingParams);var i=this.prop,n=this.from[i]*(1-e)+this.to[i]*e;t[i]=t[i]+(n-this.prev),this.prev=n}function u(t,e){var i=this.props;e=this.easing(e,this.easingParams);for(var n=0;n<i.length;n+=1){var r=i[n],o=this.from[r]*(1-e)+this.to[r]*e;t[r]=t[r]+(o-this.prevs[r]),this.prevs[r]=o}}function h(t,e){var i=this.prop,n=this.interps[i](this.easing(e,this.easingParams),this.from[i],this.to[i],this.interpParams[i]);t[i]=t[i]+(n-this.prev),this.prev=n}function l(t,e){var i=this.props;e=this.easing(e,this.easingParams);for(var n=0;n<i.length;n+=1){var r=i[n],o=this.interps[r](e,this.from[r],this.to[r],this.interpParams[r]);t[r]=t[r]+(o-this.prevs[r]),this.prevs[r]=o}}function p(t,e,i,n,r,o,s,a,u){this.start=n,this.end=n+r,this.duration=r,this.from=e,this.to=i;var h;o?(h=1,this.easing=o,this.easingParam=s):h=0;var l;null===a?l=0:(l=1,this.interps=a,this.interpParams=u||{});var p;if(1===t.length)p=0,this.prop=t[0],this.props=null,this.prev=0,this.prevs=null;else{p=1,this.prop=null,this.props=t,this.prev=null,this.prevs={};for(var d=0;d<t.length;d+=1)this.prevs[t[d]]=0}this.update=c[h][l][p]}var c=[[[n,r],[o,s]],[[a,u],[h,l]]];e.exports=p},{}],33:[function(t,e,i){function n(t,e){return this instanceof n==!1?new n(t,e):(r.call(this),void o.call(this,t,e))}var r=t("./BriefPlayable"),o=t("./AbstractTween"),s=t("./inherit");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,s(n,o),e.exports=n,n.prototype.to=function(t,e,i,n,r){return o.prototype.to.call(this,t,e,i,n,r),null!==this._player&&this._player._onPlayableChanged(this),this},n.prototype.wait=function(t){return o.prototype.to.wait(this,t),null!==this._player&&this._player._onPlayableChanged(this),this}},{"./AbstractTween":16,"./BriefPlayable":18,"./inherit":37}],34:[function(t,e,i){function n(){r.call(this),this._player=o}var r=t("./Player"),o=t("./TINA");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._inactivate=function(t){this._remove(t)},n.prototype.useAsDefault=function(){return o.setDefaultTweener(this),this}},{"./Player":24,"./TINA":27}],35:[function(t,e,i){var n=Math.PI,r=Math.PI/2,o=2*Math.PI,s=2.718281828;i.none=function(){return 1},i.linear=function(t){return t},i.flash=function(t,e){return t+t*e-t*t*e},i.parabolic=function(t){var e=2*t-1;return 1-e*e},i.trigo=function(t,e){return.5*(1-Math.cos(o*t*e))},i.elastic=function(t,e){if(1===t)return 1;e/=e+1;var i=(1+e)*Math.log(1-t)/Math.log(e);return Math.cos(i-r)*Math.pow(e,i)},i.quadIn=function(t){return t*t},i.quadOut=function(t){return 2*t-t*t},i.quadInOut=function(t){return t<.5?2*t*t:2*(2*t-t*t)-1},i.cubicIn=function(t){return t*t*t},i.cubicOut=function(t){return 3*t-3*t*t+t*t*t},i.cubicInOut=function(t){return t<.5?4*t*t*t:4*(3*t-3*t*t+t*t*t)-3},i.quarticIn=function(t){return t*t*t*t},i.quarticOut=function(t){var e=t*t;return 4*t-6*e+4*e*t-e*e},i.quarticInOut=function(t){if(t<.5)return 8*t*t*t*t;var e=t*t;return 8*(4*t-6*e+4*e*t-e*e)-7},i.polyIn=function(t,e){return Math.pow(t,e)},i.polyOut=function(t,e){return 1-Math.pow(1-t,e)},i.polyInOut=function(t,e){return t<.5?Math.pow(2*t,e)/2:(2-Math.pow(2*(1-t),e))/2},i.sineIn=function(t){return 1-Math.cos(r*t)},i.sineOut=function(t){return Math.sin(r*t)},i.sineInOut=function(t){return t<.5?(1-Math.cos(n*t))/2:(1+Math.sin(n*(t-.5)))/2},i.expIn=function(t,e){return(1-Math.pow(s,e*t))/(1-Math.pow(s,e))},i.expOut=function(t,e){return(1-Math.pow(s,-e*t))/(1-Math.pow(s,-e))},i.expInOut=function(t,e){return t<.5?(1-Math.pow(s,2*e*t))/(1-Math.pow(s,e))/2:.5+(1-Math.pow(s,e-2*e*t))/(1-Math.pow(s,-e))/2},i.circIn=function(t){return 1-Math.sqrt(1-Math.pow(t,2))},i.circOut=function(t){return Math.sqrt(1-Math.pow(1-t,2))},i.circInOut=function(t){return t<.5?(1-Math.sqrt(1-4*t*t))/2:(1+Math.sqrt(-3+8*t-4*t*t))/2},i.elasticIn=function(t,e){if(0===t)return 0;e/=e+1;var i=(1+e)*Math.log(t)/Math.log(e);return Math.cos(i)*Math.pow(e,i)},i.elasticOut=function(t,e){if(1===t)return 1;e/=e+1;var i=(1+e)*Math.log(1-t)/Math.log(e);return 1-Math.cos(i)*Math.pow(e,i)},i.elasticInOut=function(t,e){var i;return t<.5?0===t?0:(e/=e+1,i=(1+e)*Math.log(2*t)/Math.log(e),.5*Math.cos(i)*Math.pow(e,i)):1===t?1:(e/=e+1,i=(1+e)*Math.log(2-2*t)/Math.log(e),.5+.5*(1-Math.cos(i)*Math.pow(e,i)))},i.bounceIn=function(t,e){if(0===t)return 0;e/=e+1;var i=(1+e)*Math.log(t)/Math.log(e);return Math.abs(Math.cos(i)*Math.pow(e,i))},i.bounceOut=function(t,e){if(1===t)return 1;e/=e+1;var i=(1+e)*Math.log(1-t)/Math.log(e);return 1-Math.abs(Math.cos(i)*Math.pow(e,i))},i.bounceInOut=function(t,e){var i;return t<.5?0===t?0:(e/=e+1,i=(1+e)*Math.log(2*t)/Math.log(e),Math.abs(.5*Math.cos(i)*Math.pow(e,i))):1===t?1:(e/=e+1,i=(1+e)*Math.log(2-2*t)/Math.log(e),.5+.5*(1-Math.abs(Math.cos(i)*Math.pow(e,i))))},i.backIn=function(t,e){return t*t*((e+1)*t-e)},i.backOut=function(t,e){return t-=1,t*t*((e+1)*t+e)+1},i.backInOut=function(t,e){return t<.5?(t*=2,.5*(t*t*((e+1)*t-e))):(t=2*t-2,.5*(t*t*((e+1)*t+e))+1)}},{}],36:[function(t,e,i){var n=t("./TINA.js");n.Delay=t("./Delay"),n.BriefExtension=t("./BriefExtension"),n.BriefPlayable=t("./BriefPlayable"),n.BriefPlayer=t("./BriefPlayer"),n.easing=t("./easing"),n.interpolation=t("./interpolation"),n.NestedTween=t("./NestedTween"),n.PixiTween=t("./NestedTween"),n.Playable=t("./Playable"),n.Player=t("./Player"),n.Recorder=t("./Recorder"),n.Sequence=t("./Sequence"),n.Ticker=t("./Ticker"),n.Timeline=t("./Timeline"),n.Timer=t("./Timer"),n.Tween=t("./Tween"),n.Tweener=t("./Tweener"),e.exports=n},{"./BriefExtension":17,"./BriefPlayable":18,"./BriefPlayer":19,"./Delay":20,"./NestedTween":22,"./Playable":23,"./Player":24,"./Recorder":25,"./Sequence":26,"./TINA.js":27,"./Ticker":28,"./Timeline":29,"./Timer":30,"./Tween":33,"./Tweener":34,"./easing":35,"./interpolation":38}],37:[function(t,e,i){e.exports=function(t,e){for(var i=Object.keys(e.prototype),n=0;n<i.length;n+=1){var r=i[n];t.prototype[r]=e.prototype[r]}}},{}],38:[function(t,e,i){i.none=function(t,e,i){return i},i.linear=function(t,e,i){return e*(1-t)+i*t},i.discrete=function(t,e,i,n){return void 0===n&&(n=1),Math.floor((e*(1-t)+i*t)/n)*n},i.vectorXY=function(t,e,i){return{x:e.x*(1-t)+i.x*t,y:e.y*(1-t)+i.y*t}},i.vectorXYZ=function(t,e,i){return{x:e.x*(1-t)+i.x*t,y:e.y*(1-t)+i.y*t,z:e.z*(1-t)+i.z*t}},i.vector=function(t,e,i){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r]*(1-t)+i[r]*t;return n},i.state=function(t,e,i,n){var r=i.length+2,o=Math.floor(t*r);return o<1?e:o>=r-1?i:n[o-1]},i.colorRGB=function(t,e,i){return{r:e.r*(1-t)+i.r*t,g:e.g*(1-t)+i.g*t,b:e.b*(1-t)+i.b*t}},i.colorRGBA=function(t,e,i){return{r:e.r*(1-t)+i.r*t,g:e.g*(1-t)+i.g*t,b:e.b*(1-t)+i.b*t,a:e.a*(1-t)+i.a*t}},i.colorRGBToHexa=function(t,e,i){var n=Math.round(e.r*(1-t)+i.r*t),r=Math.round(e.g*(1-t)+i.g*t),o=Math.round(e.b*(1-t)+i.b*t);return"#"+n.toString(16)+r.toString(16)+o.toString(16)},i.colorRGBToString=function(t,e,i){var n=Math.round(e.r*(1-t)+i.r*t),r=Math.round(e.g*(1-t)+i.g*t),o=Math.round(e.b*(1-t)+i.b*t);return"rgb("+n.toString(16)+","+r.toString(16)+","+o.toString(16)+")"},i.colorRGBAToString=function(t,e,i){var n=Math.round(e.r*(1-t)+i.r*t),r=Math.round(e.g*(1-t)+i.g*t),o=Math.round(e.b*(1-t)+i.b*t),s=Math.round(e.a*(1-t)+i.a*t);return"rgba("+n.toString(16)+","+r.toString(16)+","+o.toString(16)+","+s+")"},i.string=function(t,e,i){for(var n=e.length,r=i.length,o="",s=0;s<r;s+=1){var a=i.charCodeAt(s),u=s>=n?a<97?65:97:e.charCodeAt(s),h=Math.round(u*(1-t)+a*t);o+=String.fromCharCode(h)}return o},i.bezierQuadratic=function(t,e,i,n){var r=1-t;return r*r*e+t*(2*r*n[0]+t*i)},i.bezierCubic=function(t,e,i,n){var r=1-t;return r*r*r*e+t*(3*r*r*n[0]+t*(3*r*n[1]+t*i))},i.bezierQuartic=function(t,e,i,n){var r=1-t,o=2*r;return o*o*e+t*(4*r*o*n[0]+t*(6*o*n[1]+t*(4*r*n[2]+t*i)))},i.bezierQuintic=function(t,e,i,n){var r=1-t,o=2*r;return o*o*r*e+t*(5*o*o*n[0]+t*(10*r*o*n[1]+t*(10*o*n[2]+t*(5*r*n[3]+t*i))))},i.bezier=function(t,e,i,n){var r=n.length,o=1-t,s=i,a=r;for(k=1;k<r;k-=1)s=s*t+a*Math.pow(o,k)*n[r-k],a*=(r-k)/(k+1);return s*t+e*Math.pow(o,r)},i.bezier2d=function(t,e,i,n){for(var r,o,s=n.length,a=1-t,u=i[0],h=i[1],l=s,p=1;p<s;p-=1)r=l*Math.pow(a,p),o=n[s-p],u=u*t+r*o[0],h=h*t+r*o[1],l*=(s-p)/(p+1);return r=Math.pow(a,s),[u*t+e[0]*r,h*t+e[1]*r]},i.bezier3d=function(t,e,i,n){for(var r,o,s=n.length,a=1-t,u=i[0],h=i[1],l=i[2],p=s,c=1;c<s;c-=1)r=p*Math.pow(a,c),o=n[s-c],u=u*t+r*o[0],h=h*t+r*o[1],l=l*t+r*o[2],p*=(s-c)/(c+1);return r=Math.pow(a,s),[u*t+e[0]*r,h*t+e[1]*r,l*t+e[2]*r]},i.bezierKd=function(t,e,i,n){for(var r=n.length,o=1-t,s=e.length,a=[],u=0;u<s;u+=1)a[u]=i[u];for(var h,l,p=r,c=1;c<r;c-=1){for(h=p*Math.pow(o,c),l=n[r-c],u=0;u<s;u+=1)a[u]=a[u]*t+h*l[u];p*=(r-c)/(c+1)}for(h=Math.pow(o,r),u=0;u<s;u+=1)a[u]=a[u]*t+e[u]*h;return a},i.catmullRom=function(t,e,i,n){if(1===t)return n;var r=e.length,o=i.length+1;t*=o;var s=Math.floor(t);t-=s;for(var a=t*t,u=t*a,h=-.5*u+1*a-.5*t,l=1.5*u-2.5*a+1,p=-1.5*u+2*a+.5*t,c=.5*u-.5*a,d=s-2,f=s-1,_=s,v=s+1,y=d<0?e:i[d],m=f<0?e:i[f],g=v<o-2?i[_]:n,b=v<o-2?i[v]:n,w=[],x=0;x<r;x+=1)w[x]=y[x]*h+m[x]*l+g[x]*p+b[x]*c;return w},i.noise=function(){var t=[182,235,131,26,88,132,100,117,202,176,10,19,83,243,75,52,252,194,32,30,72,15,124,53,236,183,121,103,175,39,253,120,166,33,237,141,99,180,18,143,69,136,173,21,210,189,16,142,190,130,109,186,104,80,62,51,165,25,122,119,42,219,146,61,149,177,54,158,27,170,60,201,159,193,203,58,154,222,78,138,220,41,98,14,156,31,29,246,81,181,40,161,192,227,35,241,135,150,89,68,134,114,230,123,187,179,67,217,71,218,7,148,228,251,93,8,140,125,73,37,82,28,112,24,174,118,232,137,191,133,147,245,6,172,95,113,185,205,254,116,55,198,57,152,128,233,74,225,34,223,79,111,215,85,200,9,242,12,167,44,20,110,107,126,86,231,234,76,207,102,214,238,221,145,213,64,197,38,168,157,87,92,255,212,49,196,240,90,63,0,77,94,1,108,91,17,224,188,153,250,249,199,127,59,46,184,36,43,209,206,248,4,56,47,226,13,144,22,11,247,70,244,48,97,151,195,96,101,45,66,239,178,171,160,84,65,23,3,211,162,163,50,105,129,155,169,115,5,106,2,208,204,139,229,164,216,182],e=[-1,1];return function(i,n,r,o){for(var s=2,a=o.per||1,u=o.frq||2,h=o.oct||4,l=o.off||0,p=0,c=o.x+l,d=0;d<h;d+=1){var f=255&(c|c),_=c-(c|c),v=1-_;p+=s*(v*v*_*(3-2*v)*e[1&t[f]]-_*_*v*(3-2*_)*e[1&t[f+1]]),c*=(c-l)*u+l,s*=a}var y=1===a?1/h:.5*(1-a)/(1-Math.pow(a,h));return i+=p*y,n*(1-i)+r*i}}(),i.simplex2d=function(){function t(t,e,i){return t[0]*e+t[1]*i}var e=[182,235,131,26,88,132,100,117,202,176,10,19,83,243,75,52,252,194,32,30,72,15,124,53,236,183,121,103,175,39,253,120,166,33,237,141,99,180,18,143,69,136,173,21,210,189,16,142,190,130,109,186,104,80,62,51,165,25,122,119,42,219,146,61,149,177,54,158,27,170,60,201,159,193,203,58,154,222,78,138,220,41,98,14,156,31,29,246,81,181,40,161,192,227,35,241,135,150,89,68,134,114,230,123,187,179,67,217,71,218,7,148,228,251,93,8,140,125,73,37,82,28,112,24,174,118,232,137,191,133,147,245,6,172,95,113,185,205,254,116,55,198,57,152,128,233,74,225,34,223,79,111,215,85,200,9,242,12,167,44,20,110,107,126,86,231,234,76,207,102,214,238,221,145,213,64,197,38,168,157,87,92,255,212,49,196,240,90,63,0,77,94,1,108,91,17,224,188,153,250,249,199,127,59,46,184,36,43,209,206,248,4,56,47,226,13,144,22,11,247,70,244,48,97,151,195,96,101,45,66,239,178,171,160,84,65,23,3,211,162,163,50,105,129,155,169,115,5,106,2,208,204,139,229,164,216,182,235,131,26,88,132,100,117,202,176,10,19,83,243,75,52,252,194,32,30,72,15,124,53,236,183,121,103,175,39,253,120,166,33,237,141,99,180,18,143,69,136,173,21,210,189,16,142,190,130,109,186,104,80,62,51,165,25,122,119,42,219,146,61,149,177,54,158,27,170,60,201,159,193,203,58,154,222,78,138,220,41,98,14,156,31,29,246,81,181,40,161,192,227,35,241,135,150,89,68,134,114,230,123,187,179,67,217,71,218,7,148,228,251,93,8,140,125,73,37,82,28,112,24,174,118,232,137,191,133,147,245,6,172,95,113,185,205,254,116,55,198,57,152,128,233,74,225,34,223,79,111,215,85,200,9,242,12,167,44,20,110,107,126,86,231,234,76,207,102,214,238,221,145,213,64,197,38,168,157,87,92,255,212,49,196,240,90,63,0,77,94,1,108,91,17,224,188,153,250,249,199,127,59,46,184,36,43,209,206,248,4,56,47,226,13,144,22,11,247,70,244,48,97,151,195,96,101,45,66,239,178,171,160,84,65,23,3,211,162,163,50,105,129,155,169,115,5,106,2,208,204,139,229,164,216],i=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[1,0],[-1,0],[0,1],[0,-1],[0,1],[0,-1],[1,1],[-1,1],[1,-1],[-1,-1]];return function(n,r,o,s){for(var a=2,u=s.per||1,h=s.frq||2,l=s.oct||4,p=s.off||{x:0,y:0},c=c,d=s.x+p.x,f=s.y+p.y,_=0;_<l;_+=1){var v,y,m,g=.5*(Math.sqrt(3)-1),b=(d+f)*g,w=Math.floor(d+b),x=Math.floor(f+b),T=(3-Math.sqrt(3))/6,S=(w+x)*T,P=w-S,R=x-S;P=d-P,R=f-R;var A,M;P>R?(A=1,M=0):(A=0,M=1);var j=P-A+T,I=R-M+T,L=P-1+2*T,E=R-1+2*T,B=255&w,C=255&x,O=.5-P*P-R*R,F=.5-j*j-I*I,D=.5-L*L-E*E;if(O<0)v=0;else{var k=15&e[B+e[C]];O*=O,v=O*O*t(i[k],P,R)}if(F<0)y=0;else{var U=15&e[B+A+e[C+M]];F*=F,y=F*F*t(i[U],j,I)}if(D<0)m=0;else{var N=15&e[B+1+e[C+1]];D*=D,m=D*D*t(i[N],L,E)}c+=70*a*(v+y+m),d*=(d-p.x)*h+p.x,f*=(f-p.y)*h+p.y,a*=u}var G=1===u?1/l:.5*(1-u)/(1-Math.pow(u,l));return n+=c*G,r*(1-n)+o*n}}()},{}],39:[function(t,e,i){e.exports={name:"gltile",screen:{width:128,height:128,pixelSize:[3,3],fullscreen:!1},tileSize:[8,8],palette:["#000000","#FFF1E8","#008751","#AB5236","#7E2553","#5F574F","#29ADFF","#00E756","#FFA300","#FF77A8","#C2C3C7","#83769C","#FFFF27","#FFCCAA","#1D2B53","#FF004D"],controls:{up:38,down:40,left:37,right:39,A:32,B:88},touchEvent:{multiTouch:!1,disableContextMenu:!1,hideMousePointer:!1},loaderColors:[0,1],components:{pixelboxCore:!0,keyboard:!0,AudioManager:!0,TINA:!0}}},{}],40:[function(t,e,i){function n(t){var e=u.createBuffer();return u.bindBuffer(u.ARRAY_BUFFER,e),u.bufferData(u.ARRAY_BUFFER,t,u.STATIC_DRAW),e}function r(t,e,i){u.bindBuffer(u.ARRAY_BUFFER,e);var n=u.getAttribLocation(t,i);return u.enableVertexAttribArray(n),n}var o=t("TileMap"),s=t("./screenGL"),a=t("./shaders"),u=s.gl,h=4,l=3,p=0,c=1,d=16,f=17;o.prototype.createVertex=function(){this.paletteIndex=1;for(var t=[],e=0;e<this.height;e++)for(var i=0;i<this.width;i++){var r=this.get(i,e);if(r){var o=r.sprite;t.push(i+0),t.push(-e+0),t.push(o+p),t.push(i+1),t.push(-e+0),t.push(o+c),t.push(i+0),t.push(-e-1),t.push(o+d),t.push(i+0),t.push(-e-1),t.push(o+d),t.push(i+1),t.push(-e+0),t.push(o+c),t.push(i+1),t.push(-e-1),t.push(o+f)}}for(var s=new ArrayBuffer(t.length*h),a=new Float32Array(s),u=0;u<t.length;u+=l)a[u+0]=t[u+0],a[u+1]=t[u+1],a[u+2]=t[u+2];this.bufferLength=t.length/l,this.vertexBuffer=n(s)},o.prototype.renderGL=function(){var t=s.useProgram(a.tilemap),e=r(t,this.vertexBuffer,"a_coordinates"),i=r(t,this.vertexBuffer,"a_sprite");u.vertexAttribPointer(e,2,u.FLOAT,!1,h*l,0),u.vertexAttribPointer(i,1,u.FLOAT,!1,h*l,2*h),s.bindTexture(this.tilesheet||assets.tilesheet,0);var n=u.getUniformLocation(a.tilemap,"u_texture");u.uniform1i(n,0),s.bindTexture(assets.palette,1);var o=u.getUniformLocation(a.tilemap,"u_palette");u.uniform1i(o,1);var p=u.getUniformLocation(a.tilemap,"u_palIndex");u.uniform1f(p,this.paletteIndex),u.drawArrays(u.TRIANGLES,0,this.bufferLength)}},{"./screenGL":42,"./shaders":43,TileMap:6}],41:[function(t,e,i){function n(t){for(var e=0;e<t;e++)a.push({x:2*(Math.random()-.5),y:2*(Math.random()-.5),sx:.1*(Math.random()-.5),sy:.1*(Math.random()-.5)})}var r=t("./screenGL"),o=(t("./TileMapGL"),t("./shaders"),getMap("map"));o.createVertex();var s=1e3,a=[];n(s),i.update=function(){gl.clearColor(.4,.4,.4,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);for(var t=0;t<a.length;t++){var e=a[t];e.x+=e.sx,e.y+=e.sy,(e.x>1&&e.sx>0||e.x<-1&&e.sx<0)&&(e.sx*=-1),(e.y>1&&e.sy>0||e.y<-1&&e.sy<0)&&(e.sy*=-1)}r.tiles(assets.bunny,a),btnp.A&&(n(s),console.log(a.length))}},{"./TileMapGL":40,"./screenGL":42,"./shaders":43}],42:[function(t,e,i){function n(t){return t._glTexture?t._glTexture:(texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),t._glTexture=texture,texture)}function r(){this.gl=c,this.program=d}var o=t("domUtils"),s=4,a=settings.screen.width,u=settings.screen.height,h=settings.screen.pixelSize[0],l=settings.screen.pixelSize[1];o.removeDom($screen.canvas);var p=o.createDom("canvas");p.width=a,p.height=u,p.style.width=a*h+"px",p.style.height=u*l+"px";var c=p.getContext("webgl",{antialias:!1});c.viewport(0,0,p.width,p.height),c.enable(c.BLEND),c.disable(c.DEPTH_TEST),c.depthMask(!1);var d=null;window.gl=c,r.prototype.useProgram=function(t){if(this.program===t)return t;if(null!==this.program){var e=c.getProgramParameter(this.program,c.ACTIVE_ATTRIBUTES),i=c.getProgramParameter(t,c.ACTIVE_ATTRIBUTES);if(i>e)for(var n=e;n<i;n++)c.enableVertexAttribArray(n);else if(i<e)for(var n=i;n<e;n++)c.disableVertexAttribArray(n)}return this.program=t,c.useProgram(t),t},r.prototype.bindTexture=function(t,e){var i=n(t);c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_2D,i)},r.prototype.draw=function(e,i,n){var r=e.width,o=e.height,h=t("./shaders").sprite;this.useProgram(h);var l=4,p=[2*i/a-1,2*n/u-1,0,0,2*(i+r)/a-1,2*n/u-1,1,0,2*(i+r)/a-1,2*(n+o)/u-1,1,1,2*i/a-1,2*(n+o)/u-1,0,1],d=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,d),c.bufferData(c.ARRAY_BUFFER,new Float32Array(p),c.STATIC_DRAW);var f=c.getAttribLocation(h,"a_coordinates");c.enableVertexAttribArray(f),c.vertexAttribPointer(f,l,c.FLOAT,!1,s*l,0);var _=[0,1,3,3,1,2],v=6,y=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(_),c.STATIC_DRAW),$screen.bindTexture(e,0);var m=c.getUniformLocation(h,"u_texture");c.uniform1i(m,0),c.drawElements(c.TRIANGLES,v,c.UNSIGNED_SHORT,0)},r.prototype.tiles=function(e,i){var n=t("./shaders").tilepoint;this.useProgram(n);for(var r=i.length,o=2,a=new Float32Array(2*r),u=0;u<r;u++)a[2*u]=i[u].x,a[2*u+1]=i[u].y;var h=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h),c.bufferData(c.ARRAY_BUFFER,a,c.STATIC_DRAW);var l=c.getAttribLocation(n,"a_coordinates");c.enableVertexAttribArray(l),c.vertexAttribPointer(l,o,c.FLOAT,!1,s*o,0),$screen.bindTexture(e,0);var p=c.getUniformLocation(n,"u_texture");c.uniform1i(p,0),c.drawArrays(c.POINTS,0,r)},r.prototype.circle=function(e,i,n,r){var o=t("./shaders").circle;this.useProgram(o);var h=4,l=[2*e/a-1,2*i/u-1,0,0,2*(e+n)/a-1,2*i/u-1,1,0,2*(e+n)/a-1,2*(i+r)/u-1,1,1,2*e/a-1,2*(i+r)/u-1,0,1],p=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,p),c.bufferData(c.ARRAY_BUFFER,new Float32Array(l),c.STATIC_DRAW);var d=c.getAttribLocation(o,"a_coordinates");c.enableVertexAttribArray(d),c.vertexAttribPointer(d,h,c.FLOAT,!1,s*h,0);var f=[0,1,3,3,1,2],_=6,v=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,v),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),c.STATIC_DRAW),c.drawElements(c.TRIANGLES,_,c.UNSIGNED_SHORT,0)},r.prototype.triangle=function(){var e=t("./shaders").plainColor;this.useProgram(e);var i=2,n=3,r=[0,1,-1,-1,1,-1],o=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,o),c.bufferData(c.ARRAY_BUFFER,new Float32Array(r),c.STATIC_DRAW);var a=c.getAttribLocation(e,"a_coordinates");c.enableVertexAttribArray(a),c.vertexAttribPointer(a,i,c.FLOAT,!1,s*i,0),c.drawArrays(c.TRIANGLES,0,n)},e.exports=window.$screen=new r},{"./shaders":43,domUtils:15}],43:[function(t,e,i){function n(t,e){var i=o.createShader(e);if(o.shaderSource(i,t),o.compileShader(i),!o.getShaderParameter(i,o.COMPILE_STATUS))throw new Error(o.getShaderInfoLog(i));
return i}function r(t,e){var i=n(t,o.VERTEX_SHADER),r=n(e,o.FRAGMENT_SHADER),s=o.createProgram();if(o.attachShader(s,i),o.attachShader(s,r),o.linkProgram(s),!o.getProgramParameter(s,o.LINK_STATUS))throw new Error(o.getProgramInfoLog(s));return s}var o=t("./screenGL").gl,s={};for(var a in assets.shaders){var u=assets.shaders[a];s[a]=r(u.vert,u.frag)}e.exports=s},{"./screenGL":42}],44:[function(t,e,i){function n(){for(var t=0;t<g;t++)_[m[t]]=!1,v[m[t]]=!1}function r(t,e){var i=y[t];i&&(e&&!f[i]&&(_[i]=!0),!e&&f[i]&&(v[i]=!0),f[i]=e)}function o(t,e,i){var n=new b(t,e),r=n.canvas;document.body.appendChild(r);var o=r.style;return o.width=t*i[0]+"px",o.height=e*i[1]+"px",n}function s(e,i){function r(){l.update(),o.update(),n(),S(r)}if(paper(0).pen(1).cls(),e)return print(e),console.error(e);window.assets=i,i.tilesheet&&tilesheet(i.tilesheet),w.loadBank(i.maps);var o=t("../src/main.js");o.update&&(n(),r())}function a(t,e,i,n){rectfill(P-R,A-2,~~(n*R*2),4)}var u=t("../settings.json");window.settings=u;var h=t("assetLoader");window.inherits=function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var l=t("tina");window.TINA=l;var p=(new l.Ticker).useAsDefault();l.add(p);var c=t("audio-manager"),d=window.audioManager=new c(["sfx"]);d.settings.audioPath="audio/",d.settings.defaultFade=.3,d.init(),d.setVolume("sfx",1),window.sfx=function(t,e,i,n){d.playSound("sfx",t,e,i,n)},window.music=function(t,e){return t?void d.playLoopSound("sfx",t,e):void d.stopLoopSound("sfx")};var f=window.btn={},_=window.btnp={},v=window.btnr={},y={},m=[],g=0;!function(){var t=u.controls||{up:38,down:40,left:37,right:39,A:32,B:88};for(var e in t){var i=t[e];y[i]=e,f[e]=!1,_[e]=!1,v[e]=!1,m.push(e)}g=m.length}(),window.addEventListener("keydown",function(t){t.preventDefault(),r(t.keyCode,!0)}),window.addEventListener("keyup",function(t){t.preventDefault(),r(t.keyCode,!1)}),window.chr$=function(t){return String.fromCharCode(t)},window.clip=function(t,e,i){return Math.max(e,Math.min(i,t))},window.random=function(t){return~~Math.round(t*Math.random())};var b=t("Texture"),w=t("TileMap");window.texture=function(t){var e=new b(t.width,t.height);return e.ctx.drawImage(t,0,0),e},window.tilesheet=function(t){return b.prototype.setGlobalTilesheet(t)};var x=window.$screen=o(u.screen.width,u.screen.height,u.screen.pixelSize);x.setPalette(u.palette),window.cls=function(){return x.cls()},window.sprite=function(t,e,i,n,r,o){return x.sprite(t,e,i,n,r,o)},window.draw=function(t,e,i,n,r,o){return x.draw(t,e,i,n,r,o)},window.rect=function(t,e,i,n){return x.rect(t,e,i,n)},window.rectfill=function(t,e,i,n){return x.rectfill(t,e,i,n)},window.camera=function(t,e){return x.setCamera(t,e)},window.pen=function(t){return x.pen(t)},window.paper=function(t){return x.paper(t)},window.locate=function(t,e){return x.locate(t,e)},window.print=function(t,e,i){return x.print(t,e,i)},window.println=function(t){return x.println(t)},window.getMap=w.getMap;var T=1/60,S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,T)},P=~~(u.screen.width/2),R=~~(u.screen.width/4),A=~~(u.screen.height/2),M=u.loaderColors||[0,1];Array.isArray(M)||(M=[0,1]);var j=~~M[0],I=~~M[1];paper(j).cls().paper(I).pen(I),rect(P-R-2,A-4,2*R+4,8),h.preloadStaticAssets(s,a)},{"../settings.json":39,"../src/main.js":41,Texture:5,TileMap:6,assetLoader:7,"audio-manager":9,tina:36}]},{},[44]);